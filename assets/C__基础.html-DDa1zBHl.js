import{_ as c,c as o,d as s,b as p,a as e,w as t,r as i,o as u,e as l}from"./app-O9I-yMSb.js";const r="/Yanran_blog/assets/C__%E5%9F%BA%E7%A1%80-CzumH0co.png",d="/Yanran_blog/assets/C__%E5%9F%BA%E7%A1%80-1-CW6dZvLE.png",k="/Yanran_blog/assets/C__%E5%9F%BA%E7%A1%80-2-nMXCaj2j.png",m="/Yanran_blog/assets/C__%E5%9F%BA%E7%A1%80-3-BZ3XeGRP.png",v="/Yanran_blog/assets/C__%E5%9F%BA%E7%A1%80-4-DTsQdfxZ.png",b="/Yanran_blog/assets/C__%E5%9F%BA%E7%A1%80-5-BZjdL7yq.png",g={};function h(y,n){const a=i("RouteLink");return u(),o("div",null,[n[2]||(n[2]=s('<h1 id="c-基础" tabindex="-1"><a class="header-anchor" href="#c-基础"><span>C++基础</span></a></h1><h2 id="_1-技术路线" tabindex="-1"><a class="header-anchor" href="#_1-技术路线"><span>1. 技术路线</span></a></h2><p><img src="'+r+`" alt="600"></p><h2 id="_2-链接" tabindex="-1"><a class="header-anchor" href="#_2-链接"><span>2. 链接</span></a></h2><p>https://www.zhihu.com/question/587090539</p><p>https://www.zhihu.com/tardis/zm/art/435927070?source_id=1005</p><p>https://interviewguide.cn/notes/03-hunting_job/02-interview/01-01-01-basic.html</p><h2 id="_3-指针常量与常量指针" tabindex="-1"><a class="header-anchor" href="#_3-指针常量与常量指针"><span>3. 指针常量与常量指针</span></a></h2><ul><li>const修饰指针有三种情况</li></ul><ol><li>const修饰指针 --- 常量指针</li><li>const修饰常量 --- 指针常量</li><li>const即修饰指针，又修饰常量</li></ol><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token comment">//const修饰的是指针，指针指向可以改，指针指向的值不可以更改</span></span>
<span class="line">	<span class="token keyword">const</span> <span class="token keyword">int</span> <span class="token operator">*</span> p1 <span class="token operator">=</span> <span class="token operator">&amp;</span>a<span class="token punctuation">;</span> </span>
<span class="line">	p1 <span class="token operator">=</span> <span class="token operator">&amp;</span>b<span class="token punctuation">;</span> <span class="token comment">//正确</span></span>
<span class="line">	<span class="token comment">//*p1 = 100;  报错</span></span>
<span class="line">	<span class="token comment">//const修饰的是常量，指针指向不可以改，指针指向的值可以更改</span></span>
<span class="line">	<span class="token keyword">int</span> <span class="token operator">*</span> <span class="token keyword">const</span> p2 <span class="token operator">=</span> <span class="token operator">&amp;</span>a<span class="token punctuation">;</span></span>
<span class="line">	<span class="token comment">//p2 = &amp;b; //错误</span></span>
<span class="line">	<span class="token operator">*</span>p2 <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span> <span class="token comment">//正确</span></span>
<span class="line">    <span class="token comment">//const既修饰指针又修饰常量</span></span>
<span class="line">	<span class="token keyword">const</span> <span class="token keyword">int</span> <span class="token operator">*</span> <span class="token keyword">const</span> p3 <span class="token operator">=</span> <span class="token operator">&amp;</span>a<span class="token punctuation">;</span></span>
<span class="line">	<span class="token comment">//p3 = &amp;b; //错误</span></span>
<span class="line">	<span class="token comment">//*p3 = 100; //错误</span></span>
<span class="line">	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">&quot;pause&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>引用的本质是在内部实现一个指针常量.</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//自动转换为 int* const ref = &amp;a; 指针常量是指针指向不可改，也说明为什么引用不可更改</span></span>
<span class="line"><span class="token keyword">int</span><span class="token operator">&amp;</span> ref <span class="token operator">=</span> a<span class="token punctuation">;</span> </span>
<span class="line">ref <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">//内部发现ref是引用，自动转换为: *ref = 20;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>在函数形参列表中，可以加==const修饰形参==，防止形参改变实参</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token comment">//int&amp; ref = 10;  引用本身需要一个合法的内存空间，因此这行错误</span></span>
<span class="line"><span class="token comment">//加入const就可以了，编译器优化代码，int temp = 10; const int&amp; ref = temp;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;</span> ref <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//常用作类的拷贝构造函数</span></span>
<span class="line"><span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword">const</span> Person<span class="token operator">&amp;</span> p<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;拷贝构造函数!&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-指针数组与数组指针" tabindex="-1"><a class="header-anchor" href="#_4-指针数组与数组指针"><span>4. 指针数组与数组指针</span></a></h2><ul><li>指针</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//变量名是p</span></span>
<span class="line"><span class="token keyword">int</span><span class="token operator">*</span> p <span class="token operator">=</span> <span class="token operator">&amp;</span>a<span class="token punctuation">;</span><span class="token comment">//p是一个变量名，其值是int*类型</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">int</span> array<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 定义数组</span></span>
<span class="line"><span class="token keyword">int</span> <span class="token operator">*</span>intptr <span class="token operator">=</span> array<span class="token punctuation">;</span> <span class="token comment">// 定义指向数组元素的指针</span></span>
<span class="line">cout <span class="token operator">&lt;&lt;</span> intptr <span class="token operator">&lt;&lt;</span> endl <span class="token operator">&lt;&lt;</span> intptr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> endl<span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>intptr <span class="token operator">&lt;&lt;</span>endl<span class="token operator">&lt;&lt;</span> <span class="token operator">*</span><span class="token punctuation">(</span>intptr<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>arrayptr<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>array<span class="token punctuation">;</span> <span class="token comment">// 定义指向数组的指针</span></span>
<span class="line">cout <span class="token operator">&lt;&lt;</span> arrayptr <span class="token operator">&lt;&lt;</span> endl <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>arrayptr <span class="token operator">&lt;&lt;</span> endl<span class="token operator">&lt;&lt;</span> <span class="token operator">*</span><span class="token operator">*</span>arrayptr <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">*</span>arrayptr<span class="token operator">+</span><span class="token number">1</span> <span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//输出</span></span>
<span class="line"><span class="token number">012FF</span>C20</span>
<span class="line"><span class="token number">3</span></span>
<span class="line"><span class="token number">1</span></span>
<span class="line"><span class="token number">2</span></span>
<span class="line"><span class="token number">012FF</span>C20</span>
<span class="line"><span class="token number">012FF</span>C20</span>
<span class="line"><span class="token number">12</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>指针数组：是一个数组，其每个元素是指针</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token comment">//变量名是p[3]</span></span>
<span class="line"><span class="token keyword">int</span><span class="token operator">*</span> p<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//定义一个指针数组,该数组长度为3，其内存放着三个指针变量分别是p[0]、p[1]、p[2]</span></span>
<span class="line"><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span></span>
<span class="line">	p<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token comment">//要分别赋值。</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></span>
<span class="line">cout <span class="token operator">&lt;&lt;</span> <span class="token operator">&amp;</span>a <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//变量名是p[3][4]</span></span>
<span class="line"><span class="token keyword">int</span><span class="token operator">*</span> p<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">&amp;</span>a <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//直接定义二维数组，其每个元素存放a的地址</span></span>
<span class="line">cout <span class="token operator">&lt;&lt;</span> p<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>数组指针：是一个指针，其指向一个数组</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//变量名是*p</span></span>
<span class="line"><span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//定义一个数组指针</span></span>
<span class="line">p<span class="token operator">=</span>a<span class="token punctuation">;</span> <span class="token comment">//将二维数组赋给一个指针，本质上将二维数组的首地址赋给p，即a[0]或&amp;a[0][0]</span></span>
<span class="line">p<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">//该语句执行过后，也就是p=p+1;p跨过行a[0][]指向了行a[1][]</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">int</span><span class="token punctuation">(</span><span class="token operator">*</span> pa<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>a<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//变量名是*pa</span></span>
<span class="line">cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">*</span>pa<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-指针函数与函数指针" tabindex="-1"><a class="header-anchor" href="#_5-指针函数与函数指针"><span>5. 指针函数与函数指针</span></a></h2><ul><li>指针函数：是一个函数，返回值是指针</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">int</span>  <span class="token operator">*</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span></span>
<span class="line">Data<span class="token operator">*</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    Data <span class="token operator">*</span> data <span class="token operator">=</span> <span class="token keyword">new</span> Data<span class="token punctuation">;</span></span>
<span class="line">    data<span class="token operator">-&gt;</span>a <span class="token operator">=</span> a<span class="token punctuation">;</span></span>
<span class="line">    data<span class="token operator">-&gt;</span>b <span class="token operator">=</span> b<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">return</span> data<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>函数指针：是一个指针，指向函数的入口</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">int</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> a<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>fp<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    fp <span class="token operator">=</span> test<span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">//或者</span></span>
<span class="line">    <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>fp<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>test<span class="token punctuation">;</span></span>
<span class="line">    cout<span class="token operator">&lt;&lt;</span><span class="token function">fp</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-lambda表达式" tabindex="-1"><a class="header-anchor" href="#_6-lambda表达式"><span>6. Lambda表达式</span></a></h2><ul><li>Lambda表达式是一种在<strong>被调用的位置</strong>或<strong>作为参数传递给函数的位置</strong>定义<strong>匿名函数对象（闭包）</strong> 的简便方法。</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token punctuation">[</span>capture list<span class="token punctuation">]</span> <span class="token punctuation">(</span>parameter list<span class="token punctuation">)</span> <span class="token keyword">mutable</span> <span class="token operator">-&gt;</span> <span class="token keyword">return</span> type <span class="token punctuation">{</span> function body <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>[capture list] 是捕获列表，用于指定 Lambda表达式可以访问的外部变量，以及是按值还是按引用的方式访问。它标识一个Lambda的开始。函数对象参数是传递给编译器自动生成的函数对象类的构造函数的。函数对象参数只能使用那些到定义Lambda为止时Lambda所在作用范围内可见的局部变量（包括Lambda所在类的this）。 <ol><li>空：没有使用任何函数对象参数。</li><li>=：使用Lambda所在作用范围内所有可见的局部变量（包括Lambda所在类的this），并且是<strong>值传递方式</strong>（相当于编译器自动为我们按值传递了所有局部变量）。</li><li>&amp;：使用Lambda所在作用范围内所有可见的局部变量（包括Lambda所在类的this），并且是<strong>引用传递方式</strong>（相当于编译器自动为我们按引用传递了所有局部变量）。</li><li>this：函数体内可以使用Lambda所在类中的成员变量。此时是<strong>引用传递类的成员变量</strong>。</li><li>a：将a按值进行传递。按值进行传递时，函数体内不能修改传递进来的a的拷贝，因为默认情况下函数是const的。<strong>要修改传递进来的a的拷贝</strong>，可以添加mutable修饰符。</li><li>&amp;a：将a按引用进行传递。</li><li>a, &amp;b：将a按值进行传递，b按引用进行传递。</li><li>=，&amp;a, &amp;b。除a和b按引用进行传递外，其他参数都按值进行传递。</li><li>&amp;, a, b：除a和b按值进行传递外，其他参数都按引用进行传递。</li></ol></li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">auto</span> f <span class="token operator">=</span> <span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token keyword">int</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 值捕获 x</span></span>
<span class="line">x <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">// 修改外部的 x</span></span>
<span class="line">cout <span class="token operator">&lt;&lt;</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// 输出 15，不受外部 x 的影响</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">auto</span> f <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span>x<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token keyword">int</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 引用捕获 x</span></span>
<span class="line">x <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">// 修改外部的 x</span></span>
<span class="line">cout <span class="token operator">&lt;&lt;</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// 输出 25，受外部 x 的影响</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">auto</span> f <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">=</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>y<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token keyword">int</span> z<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token keyword">int</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> x <span class="token operator">+</span> y <span class="token operator">+</span> z<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 隐式按值捕获 x，显式按引用捕获 y</span></span>
<span class="line">x <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span> <span class="token comment">// 修改外部的 x</span></span>
<span class="line">y <span class="token operator">=</span> <span class="token number">40</span><span class="token punctuation">;</span> <span class="token comment">// 修改外部的 y</span></span>
<span class="line">cout <span class="token operator">&lt;&lt;</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// 输出 55，不受外部 x 的影响，受外部 y 的影响</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">auto</span> f <span class="token operator">=</span> <span class="token punctuation">[</span>z <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token keyword">int</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> z <span class="token operator">+</span> y<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 初始化捕获 z，相当于值捕获 x + 5</span></span>
<span class="line">x <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">// 修改外部的 x</span></span>
<span class="line">cout <span class="token operator">&lt;&lt;</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// 输出 20，不受外部 x 的影响</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>parameter list 是参数列表，用于表示 Lambda表达式的参数，没有参数时，可以为空。也可以省略。有参数时和普通函数一样指定参数的类型和名称，例如通过按值（如：(a,b)）和按引用（如：(&amp;a,&amp;b)）两种方式进行传递，还可以在 c++14 中使用 auto 关键字来实现泛型参数。</li><li>mutable是可修改标示符，按值传递函数对象参数时，加上mutable修饰符后，可以修改按值传递进来的拷贝（注意是能修改拷贝，而不是值本身）。不使用时可以省略。</li><li>return type 是返回值类型，用于指定 Lambda表达式的返回值类型，可以省略，表示由编译器根据函数体推导，也可以使用 -&gt; 符号显式指定，还可以在 c++14 中使用 auto 关键字来实现泛型返回值。</li><li>function body 是函数体，用于表示 Lambda表达式的具体逻辑，可以是一条语句，也可以是多条语句，还可以在 c++14 中使用 constexpr 来实现编译期计算。</li></ul><blockquote><p>[!NOTE] 虽然=捕获列表是值传递，但是可以以值的形式传地址，在Lambda函数内部不修改该地址而修改该地址存放的数据以实现修改值</p></blockquote><h2 id="_7-字符大小写转换" tabindex="-1"><a class="header-anchor" href="#_7-字符大小写转换"><span>7. 字符大小写转换</span></a></h2><ul><li>字母大写转换</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cctype&gt;</span> <span class="token comment">// 包含 toupper 和 tolower 函数</span></span></span>
<span class="line">std<span class="token double-colon punctuation">::</span>string str <span class="token operator">=</span> <span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// 转换为大写</span></span>
<span class="line"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">&amp;</span>c <span class="token operator">:</span> str<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	c <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">toupper</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> str <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span> <span class="token comment">// 输出: HELLO WORLD!</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>字母小写转换</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token comment">// 转换为小写</span></span>
<span class="line"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">&amp;</span>c <span class="token operator">:</span> str<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	c <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">tolower</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> str <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span> <span class="token comment">// 输出: hello world!</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>字符自动识别转换</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cctype&gt;</span></span></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isupper</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果输入的是大写字母  </span></span>
<span class="line">        ch <span class="token operator">=</span> <span class="token function">tolower</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 转换为小写字母并输出  </span></span>
<span class="line">        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;转换后的字母为：&quot;</span> <span class="token operator">&lt;&lt;</span> ch <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  </span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">islower</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果输入的是小写字母  </span></span>
<span class="line">	ch <span class="token operator">=</span> <span class="token function">toupper</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 转换为大写字母并输出  </span></span>
<span class="line">	cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;转换后的字母为：&quot;</span> <span class="token operator">&lt;&lt;</span> ch <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  </span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>  </span>
<span class="line">	cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;输入的不是英文字母。&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  </span>
<span class="line"><span class="token punctuation">}</span>  </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>字符串大小写转换</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;algorithm&gt;</span></span></span>
<span class="line">cin<span class="token operator">&gt;&gt;</span>str<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">///转小写</span></span>
<span class="line"><span class="token function">transform</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>str<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>str<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token double-colon punctuation">::</span>tolower<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">cout<span class="token operator">&lt;&lt;</span><span class="token string">&quot;转化为小写后为：&quot;</span><span class="token operator">&lt;&lt;</span>str<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span></span>
<span class="line"><span class="token function">transform</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>str<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>str<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token double-colon punctuation">::</span>toupper<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">cout<span class="token operator">&lt;&lt;</span><span class="token string">&quot;转化为大写后为：&quot;</span><span class="token operator">&lt;&lt;</span>str<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-字符-数字转换" tabindex="-1"><a class="header-anchor" href="#_8-字符-数字转换"><span>8. 字符-数字转换</span></a></h2><ul><li>数字转字符</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 数字1</span></span>
<span class="line"><span class="token keyword">char</span> ch <span class="token operator">=</span> num <span class="token operator">+</span> <span class="token char">&#39;0&#39;</span><span class="token punctuation">;</span> <span class="token comment">// 转换为字符&#39;1&#39;</span></span>
<span class="line">cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;转换后的字符是: &quot;</span> <span class="token operator">&lt;&lt;</span> ch <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// 输出: 转换后的字符是: 1</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//以下方法只能用于整形/长整型转字符数组</span></span>
<span class="line"><span class="token keyword">int</span> g <span class="token operator">=</span> <span class="token number">45612</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">char</span> j<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">itoa</span><span class="token punctuation">(</span>g<span class="token punctuation">,</span> j<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">ltoa</span><span class="token punctuation">(</span>g<span class="token punctuation">,</span> j<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>字符转数字</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">char</span> ch <span class="token operator">=</span> <span class="token char">&#39;9&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">int</span> n <span class="token operator">=</span> ch <span class="token operator">-</span> <span class="token char">&#39;0&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//以下方法只能用于字符数组转int/float/long</span></span>
<span class="line"><span class="token keyword">char</span> cstr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;1234.6&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">int</span> d <span class="token operator">=</span> <span class="token function">atoi</span><span class="token punctuation">(</span>cstr<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">float</span> d <span class="token operator">=</span> <span class="token function">atof</span><span class="token punctuation">(</span>cstr<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">long</span> d <span class="token operator">=</span> <span class="token function">atol</span><span class="token punctuation">(</span>cstr<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>数字转字符串</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line">string <span class="token function">to_string</span><span class="token punctuation">(</span><span class="token keyword">int</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">string <span class="token function">to_string</span><span class="token punctuation">(</span><span class="token keyword">long</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">string <span class="token function">to_string</span><span class="token punctuation">(</span><span class="token keyword">long</span> <span class="token keyword">long</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">string <span class="token function">to_string</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">string <span class="token function">to_string</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">long</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">string <span class="token function">to_string</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">long</span> <span class="token keyword">long</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">string <span class="token function">to_string</span><span class="token punctuation">(</span><span class="token keyword">float</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">string <span class="token function">to_string</span><span class="token punctuation">(</span><span class="token keyword">double</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">string <span class="token function">to_string</span><span class="token punctuation">(</span><span class="token keyword">long</span> <span class="token keyword">double</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">string si <span class="token operator">=</span> <span class="token function">to_string</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// si=&quot;42&quot;</span></span>
<span class="line">string sl <span class="token operator">=</span> <span class="token function">to_string</span><span class="token punctuation">(</span><span class="token number">42L</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// sl=&quot;42&quot;</span></span>
<span class="line">string su <span class="token operator">=</span> <span class="token function">to_string</span><span class="token punctuation">(</span><span class="token number">42u</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// su=&quot;42&quot;</span></span>
<span class="line">string sd <span class="token operator">=</span> <span class="token function">to_wstring</span><span class="token punctuation">(</span><span class="token number">42.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// sd=&quot;42.000000&quot;</span></span>
<span class="line">string sld <span class="token operator">=</span> <span class="token function">to_wstring</span><span class="token punctuation">(</span><span class="token number">42.0L</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// sld=&quot;42.000000&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>字符串转数字</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">int</span> <span class="token function">stoi</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> str<span class="token punctuation">,</span> size_t<span class="token operator">*</span> idx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token keyword">int</span> base <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">long</span> <span class="token function">stol</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> str<span class="token punctuation">,</span> size_t<span class="token operator">*</span> idx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span> base <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">long</span> <span class="token keyword">long</span> <span class="token function">stoll</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> str<span class="token punctuation">,</span> size_t<span class="token operator">*</span> idx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span> base <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">auto</span> i1 <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">stoi</span><span class="token punctuation">(</span><span class="token string">&quot;42&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">auto</span> i2 <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">stoi</span><span class="token punctuation">(</span><span class="token string">&quot;101010&quot;</span><span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// i2 = 42</span></span>
<span class="line"><span class="token keyword">auto</span> i3 <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">stoi</span><span class="token punctuation">(</span><span class="token string">&quot;052&quot;</span><span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// i3 = 42</span></span>
<span class="line"><span class="token keyword">auto</span> i4 <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">stoi</span><span class="token punctuation">(</span><span class="token string">&quot;0x2A&quot;</span><span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// i4 = 42</span></span>
<span class="line"><span class="token keyword">auto</span> f1 <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">stof</span><span class="token punctuation">(</span><span class="token string">&quot;123.45&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">auto</span> d2 <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">stod</span><span class="token punctuation">(</span><span class="token string">&quot;1.2345e+2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">auto</span> ll3 <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">stod</span><span class="token punctuation">(</span><span class="token string">&quot;-123456789&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>toascii（将整型数转换成合法的ASCII 码字符）</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;ctype.h&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">toascii</span><span class="token punctuation">(</span><span class="token keyword">int</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token function">toascii</span><span class="token punctuation">(</span><span class="token punctuation">)</span>会将参数c转换成<span class="token number">7</span>位的<span class="token keyword">unsigned</span> <span class="token keyword">char</span>值，第八位则会被清除，此字符即会被转成ASCII码字符。返回值将转换成功的ASCI</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9-string与const-char" tabindex="-1"><a class="header-anchor" href="#_9-string与const-char"><span>9. string与const char*</span></a></h2><blockquote><p>[!NOTE] &lt;string&gt;是C++标准库头文件，包含了拟容器class std::string的声明（不过class string事实上只是basic_string&lt;char&gt;的typedef），用于字符串操作。</p></blockquote><ul><li>const char* 转换成string</li></ul><p>在C++中存在着从const char*到string的隐式类型转换，换句话说，如果一个函数的参数类型是string类，直接传入const char*类型的参数是没问题的</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> cstr <span class="token operator">=</span> <span class="token string">&quot;demo&quot;</span><span class="token punctuation">;</span></span>
<span class="line">string <span class="token function">str</span><span class="token punctuation">(</span>cstr<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>string与const char*的转换</li></ul><p>在传入参数时，有时我们传入string在编译时是会报错的，所以我们就需要传入const char*类型</p><p>我们可以使用成员函数c_str()，来返回string对应的char数组</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line">string str <span class="token operator">=</span> <span class="token string">&quot;demo&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> cstr <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>并且，在进行文件读写的时候，使用const char* 比使用string更安全。因为，string是会自动分配内存的，其内部的存储方式是不可见的，而const char*类型是整存整取的，或者也可以自己手动存入每一部分</p><h2 id="_10-cstring与const-char" tabindex="-1"><a class="header-anchor" href="#_10-cstring与const-char"><span>10. CString与const char*</span></a></h2><blockquote><p>[!NOTE] &lt;cstring&gt;是C标准库头文件&lt;string.h&gt;的C++标准库版本，包含了C风格字符串（NUL即&#39;\\0&#39;结尾字符串）相关的一些类型和函数的声明，例如strcmp、strchr、strstr等。</p></blockquote>`,66)),p("p",null,[e(a,{to:"/guide/knowledge/c++/mfc.html#_2.1%20%E5%A4%9A%E5%AD%97%E8%8A%82%E4%B8%8E%E5%AE%BD%E5%AD%97%E8%8A%82"},{default:t(()=>n[0]||(n[0]=[l("2.1 多字节与宽字节")])),_:1,__:[0]})]),n[3]||(n[3]=s(`<h2 id="_11-字符串读取" tabindex="-1"><a class="header-anchor" href="#_11-字符串读取"><span>11. 字符串读取</span></a></h2><ul><li>cin&gt;&gt;</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"></span>
<span class="line">用法<span class="token number">1</span>：最基本，也是最常用的用法，输入一个数字：</span>
<span class="line"></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span>  </span></span>
<span class="line"><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>  </span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>  </span>
<span class="line"><span class="token punctuation">{</span>  </span>
<span class="line">	<span class="token keyword">int</span> a<span class="token punctuation">,</span>b<span class="token punctuation">;</span>  </span>
<span class="line">	cin<span class="token operator">&gt;&gt;</span>a<span class="token operator">&gt;&gt;</span>b<span class="token punctuation">;</span>  </span>
<span class="line">	cout<span class="token operator">&lt;&lt;</span>a<span class="token operator">+</span>b<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>  </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">输入：<span class="token number">2</span><span class="token punctuation">[</span>回车<span class="token punctuation">]</span><span class="token number">3</span><span class="token punctuation">[</span>回车<span class="token punctuation">]</span>  </span>
<span class="line">输出：<span class="token number">5</span></span>
<span class="line">注意<span class="token operator">:</span><span class="token operator">&gt;&gt;</span> 是会过滤掉不可见字符（如 空格 回车，TAB 等）</span>
<span class="line"></span>
<span class="line">用法<span class="token number">2</span>：接受一个字符串，遇“空格”、“TAB”、“回车”都结束</span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>  </span>
<span class="line"><span class="token punctuation">{</span>  </span>
<span class="line">	<span class="token keyword">char</span> a<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  </span>
<span class="line">	cin<span class="token operator">&gt;&gt;</span>a<span class="token punctuation">;</span>  </span>
<span class="line">	cout<span class="token operator">&lt;&lt;</span>a<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>  </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">输入：jkljkljkl</span>
<span class="line">输出：jkljkljkl</span>
<span class="line"></span>
<span class="line">输入：jkljkl jkljkl       <span class="token comment">//遇空格结束  </span></span>
<span class="line">输出：jkljkl</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>cin.get()</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line">用法<span class="token number">1</span>： cin<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>字符变量名<span class="token punctuation">)</span>可以用来接收字符</span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>  </span>
<span class="line"><span class="token punctuation">{</span>  </span>
<span class="line">	<span class="token keyword">char</span> ch<span class="token punctuation">;</span>  </span>
<span class="line">	ch<span class="token operator">=</span>cin<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">//或者cin.get(ch);  </span></span>
<span class="line">	cout<span class="token operator">&lt;&lt;</span>ch<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>  </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">输入：jljkljkl  </span>
<span class="line">输出：j</span>
<span class="line"></span>
<span class="line">用法<span class="token number">2</span>：cin<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>字符数组名<span class="token punctuation">,</span>接收字符数目<span class="token punctuation">)</span>用来接收一行字符串<span class="token punctuation">,</span>可以接收空格</span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>  </span>
<span class="line"><span class="token punctuation">{</span>  </span>
<span class="line">	<span class="token keyword">char</span> a<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  </span>
<span class="line">	cin<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  </span>
<span class="line">	cout<span class="token operator">&lt;&lt;</span>a<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>  </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">输入：jkl jkl jkl  </span>
<span class="line">输出：jkl jkl jkl</span>
<span class="line"></span>
<span class="line">输入：abcdeabcdeabcdeabcdeabcde （输入<span class="token number">25</span>个字符）  </span>
<span class="line">输出：abcdeabcdeabcdeabcd              （接收<span class="token number">19</span>个字符<span class="token operator">+</span><span class="token number">1</span>个<span class="token char">&#39;\\0&#39;</span>）</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>cin.getline()  // 接受一个字符串，可以接收空格并输出</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>  </span>
<span class="line"><span class="token punctuation">{</span>  </span>
<span class="line">	<span class="token keyword">char</span> m<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  </span>
<span class="line">	cin<span class="token punctuation">.</span><span class="token function">getline</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  </span>
<span class="line">	cout<span class="token operator">&lt;&lt;</span>m<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>  </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">输入：jkljkljkl  </span>
<span class="line">输出：jklj</span>
<span class="line">接受<span class="token number">5</span>个字符到m中，其中最后一个为<span class="token char">&#39;\\0&#39;</span>，所以只看到<span class="token number">4</span>个字符输出；</span>
<span class="line"></span>
<span class="line">如果把<span class="token number">5</span>改成<span class="token number">7</span>：  </span>
<span class="line">输入：jk jkajk  </span>
<span class="line">输出：jk jkajk</span>
<span class="line"></span>
<span class="line"><span class="token comment">//延伸：  </span></span>
<span class="line"><span class="token comment">//cin.getline()实际上有三个参数，cin.getline(接受字符串的变量,接受个数,结束字符)  </span></span>
<span class="line"><span class="token comment">//当第三个参数省略时，系统默认为&#39;\\0&#39;  </span></span>
<span class="line"><span class="token comment">//如果将例子中cin.getline()改为cin.getline(m,5,&#39;a&#39;);当输入jk jkajk时输出jk jk</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>getline()     // 接受一个字符串，可以接收空格并输出</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string&gt;</span>  </span></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>  </span>
<span class="line"><span class="token punctuation">{</span>  </span>
<span class="line">	string str<span class="token punctuation">;</span>  </span>
<span class="line">	<span class="token function">getline</span><span class="token punctuation">(</span>cin<span class="token punctuation">,</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>  </span>
<span class="line">	cout<span class="token operator">&lt;&lt;</span>str<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>  </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">输入：jkljkljkl  </span>
<span class="line">输出：jkljkljkl</span>
<span class="line"></span>
<span class="line">输入：jkl jfksldfj jklsjfl  </span>
<span class="line">输出：jkl jfksldfj jklsjfl</span>
<span class="line"></span>
<span class="line">和cin<span class="token punctuation">.</span><span class="token function">getline</span><span class="token punctuation">(</span><span class="token punctuation">)</span>类似，但是cin<span class="token punctuation">.</span><span class="token function">getline</span><span class="token punctuation">(</span><span class="token punctuation">)</span>属于istream流，而<span class="token function">getline</span><span class="token punctuation">(</span><span class="token punctuation">)</span>属于string流，是不一样的两个函数</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_12-explicit" tabindex="-1"><a class="header-anchor" href="#_12-explicit"><span>12. explicit</span></a></h2><ul><li><p>explicit关键字用于修饰类的构造函数，特别是那些只有一个参数的构造函数。它的目的是要求在对象初始化或赋值时必须显式地使用构造函数，从而避免了编译器自动进行类型转换所可能引发的错误和歧义。</p></li><li><p>例如，如果一个类有一个接受单个整数参数的构造函数，没有<em>explicit</em>关键字修饰，那么编译器允许使用单个整数值来隐式创建该类的对象。这可能导致代码的可读性降低，因为从代码表面上看不出实际发生了类型转换。</p></li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">public</span><span class="token operator">:</span></span>
<span class="line">		<span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">_value</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">private</span><span class="token operator">:</span></span>
<span class="line">		<span class="token keyword">int</span> _value<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">MyClass obj <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// 隐式转换，没有使用explicit关键字</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>在上述代码中，_MyClass obj = 10;_这行代码会隐式地调用_MyClass_的构造函数，将整数_10_转换为_MyClass_类型的对象。这种隐式转换可能不是程序员所期望的，尤其是在复杂的程序中，它可能导致难以追踪的错误。</p></li><li><p>使用explicit关键字：为了避免这种隐式转换，可以在构造函数前加上<em>explicit</em>关键字。这样，编译器就会阻止隐式转换，除非显式地调用构造函数。</p></li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">public</span><span class="token operator">:</span></span>
<span class="line">		<span class="token keyword">explicit</span> <span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">_value</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">private</span><span class="token operator">:</span></span>
<span class="line">		<span class="token keyword">int</span> _value<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">MyClass obj <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// 错误：不能隐式转换</span></span>
<span class="line">MyClass <span class="token function">obj</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 正确：显式调用构造函数</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>在这个例子中，_=<em>explicit</em>关键字确保了MyClass对象的创建必须明确地调用构造函数。这样可以提高代码的清晰度和安全性。</li></ul><h2 id="_13-找最大值的索引" tabindex="-1"><a class="header-anchor" href="#_13-找最大值的索引"><span>13. 找最大值的索引</span></a></h2><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">auto</span> maxit <span class="token operator">=</span> <span class="token function">max_element</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> nums<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">int</span> maxindex <span class="token operator">=</span> <span class="token function">distance</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> maxit<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_14-单例模式" tabindex="-1"><a class="header-anchor" href="#_14-单例模式"><span>14. 单例模式</span></a></h2><ul><li><p>单例模式可以分为 懒汉式 和 饿汉式 ，两者之间的区别在于创建实例的时间不同。</p></li><li><p>懒汉式：系统运行中，实例并不存在，只有当需要使用该实例时，才会去创建并使用实例。这种方式要考虑线程安全。</p></li><li><p>饿汉式：系统一运行，就初始化创建实例，当需要时，直接调用即可。这种方式本身就线程安全，没有多线程的线程安全问题。</p></li></ul><h3 id="_14-1-单例类的特点" tabindex="-1"><a class="header-anchor" href="#_14-1-单例类的特点"><span>14.1 单例类的特点</span></a></h3><ul><li>构造函数和析构函数为私有类型，目的是禁止外部构造和析构。</li><li>拷贝构造函数和赋值构造函数是私有类型，目的是禁止外部拷贝和赋值，确保实例的唯一性。</li><li>类中有一个获取实例的静态方法，可以全局访问。</li></ul><h3 id="_14-2-懒汉单例-静态局部变量" tabindex="-1"><a class="header-anchor" href="#_14-2-懒汉单例-静态局部变量"><span>14.2 懒汉单例(静态局部变量)</span></a></h3><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token comment">//.h</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Single</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line"><span class="token keyword">public</span><span class="token operator">:</span></span>
<span class="line">    <span class="token keyword">static</span> Single<span class="token operator">&amp;</span> <span class="token function">GetInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 获取单实例对象</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 打印实例地址</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">private</span><span class="token operator">:</span></span>
<span class="line">    <span class="token function">Single</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span><span class="token comment">// 禁止外部构造</span></span>
<span class="line">    <span class="token operator">~</span><span class="token function">Single</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span><span class="token comment">// 禁止外部析构</span></span>
<span class="line">    <span class="token function">Single</span><span class="token punctuation">(</span><span class="token keyword">const</span> Single <span class="token operator">&amp;</span>single<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span><span class="token comment">// 禁止外部拷贝构造</span></span>
<span class="line">    <span class="token keyword">const</span> Single <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Single <span class="token operator">&amp;</span>single<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span><span class="token comment">// 禁止外部赋值操作</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//.cpp</span></span>
<span class="line">Single<span class="token operator">&amp;</span> <span class="token class-name">Single</span><span class="token double-colon punctuation">::</span><span class="token function">GetInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">/**</span>
<span class="line">     * 局部静态特性的方式实现单实例。</span>
<span class="line">     * 静态局部变量只在当前函数内有效，其他函数无法访问。</span>
<span class="line">     * 静态局部变量只在第一次被调用的时候初始化，也存储在静态存储区，生命周期从第一次被初始化起至程序结束止。</span>
<span class="line">     */</span></span>
<span class="line">    <span class="token keyword">static</span> Single single<span class="token punctuation">;</span><span class="token comment">// C++11 保证静态局部变量初始化的线程安全</span></span>
<span class="line">    <span class="token keyword">return</span> single<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">void</span> <span class="token class-name">Single</span><span class="token double-colon punctuation">::</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;我的实例内存地址是:&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token class-name">Single</span><span class="token double-colon punctuation">::</span><span class="token function">Single</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;构造函数&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token class-name">Single</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">Single</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;析构函数&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>[!NOTE] 现代 C++（C++11 及更高版本）中，<strong>静态局部变量的初始化是线程安全的</strong>，编译器会自动处理同步问题，确保只有一个线程能初始化该变量。</p></blockquote><ul><li><strong>静态变量的生命周期</strong>：<code>instance</code> 的内存从程序启动到结束一直存在。</li><li><strong>初始化的唯一性</strong>：编译器确保 <code>instance</code> 仅在首次调用时初始化。</li><li><strong>线程安全</strong>（C++11+）：标准强制要求静态变量初始化的原子性，避免多线程冲突。</li></ul><h3 id="_14-3-饿汉单例-类唯一静态成员变量" tabindex="-1"><a class="header-anchor" href="#_14-3-饿汉单例-类唯一静态成员变量"><span>14.3 饿汉单例(类唯一静态成员变量)</span></a></h3><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">class</span> <span class="token class-name">Single</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token keyword">public</span><span class="token operator">:</span></span>
<span class="line">    <span class="token keyword">static</span> Single<span class="token operator">&amp;</span> <span class="token function">GetInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">private</span><span class="token operator">:</span></span>
<span class="line">    <span class="token function">Single</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token operator">~</span><span class="token function">Single</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">Single</span><span class="token punctuation">(</span><span class="token keyword">const</span> Single<span class="token operator">&amp;</span> single<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span></span>
<span class="line">    Single<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Single<span class="token operator">&amp;</span> single<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">// 静态成员变量（类加载时初始化）</span></span>
<span class="line">    <span class="token keyword">static</span> Single instance<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//.cpp</span></span>
<span class="line"></span>
<span class="line">Single Single<span class="token double-colon punctuation">::</span>instance<span class="token punctuation">;</span><span class="token comment">// 全局初始化实例</span></span>
<span class="line">Single<span class="token operator">&amp;</span> <span class="token class-name">Single</span><span class="token double-colon punctuation">::</span><span class="token function">GetInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> single<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">void</span> <span class="token class-name">Single</span><span class="token double-colon punctuation">::</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;我的实例内存地址是:&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">Single</span><span class="token double-colon punctuation">::</span><span class="token function">Single</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;构造函数&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token class-name">Single</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">Single</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;析构函数&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>[!NOTE] <strong>静态成员变量的初始化发生在程序启动阶段</strong>（main 函数执行前）。具体时机由编译器和运行时环境决定，但<strong>保证在任何代码访问该类之前完成初始化</strong>。</p></blockquote><ul><li>由于初始化发生在<strong>单线程环境</strong>（main 函数启动前），因此<strong>天然线程安全</strong>，无需加锁。</li></ul><h2 id="_15-静态成员" tabindex="-1"><a class="header-anchor" href="#_15-静态成员"><span>15. 静态成员</span></a></h2><h3 id="_15-1-静态成员变量" tabindex="-1"><a class="header-anchor" href="#_15-1-静态成员变量"><span>15.1 静态成员变量</span></a></h3><ul><li><p>类的静态成员变量不能类内初始化，但是可以为静态成员提供const整数类型的类内初始值。不过要求静态成员必须是字面值常量类型的constexpr。</p></li><li><p>C++ 要求静态成员变量必须在类外<strong>显式定义</strong>（除非是 <code>constexpr</code> 常量）。</p></li><li><p>类的声明只是类型定义，不分配实际内存，静态成员变量需要独立于类的实例存在。</p></li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token comment">//静态成员变量的声明与定义</span></span>
<span class="line"><span class="token keyword">static</span> Singleton instance<span class="token punctuation">;</span><span class="token comment">//仅在类内声明变量，未分配内存。</span></span>
<span class="line">Singleton Singleton<span class="token double-colon punctuation">::</span>instance<span class="token punctuation">;</span><span class="token comment">//在类外定义变量，此时才分配内存并调用构造函数。</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_15-2-静态成员函数" tabindex="-1"><a class="header-anchor" href="#_15-2-静态成员函数"><span>15.2 静态成员函数</span></a></h3><ul><li>类的静态成员函数可以类内/类外实现</li></ul>`,35)),p("p",null,[e(a,{to:"/guide/knowledge/C++/C++%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B.html#_4.2.8%20%E9%9D%99%E6%80%81%E6%88%90%E5%91%98"},{default:t(()=>n[1]||(n[1]=[l("4.2.8 静态成员")])),_:1,__:[1]})]),n[4]||(n[4]=s(`<h2 id="_16-模板" tabindex="-1"><a class="header-anchor" href="#_16-模板"><span>16. 模板</span></a></h2><h3 id="_16-1-函数模板" tabindex="-1"><a class="header-anchor" href="#_16-1-函数模板"><span>16.1 函数模板</span></a></h3><ul><li><strong>定义</strong>：定义一个通用函数，允许参数或返回值的类型在调用时指定。</li><li><strong>语法</strong>：使用 <code>template &lt;typename T&gt;</code> 声明，后跟函数定义。</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token comment">//交换的函数模板</span></span>
<span class="line"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">mySwap</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> T<span class="token operator">&amp;</span>b<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">	T temp <span class="token operator">=</span> a<span class="token punctuation">;</span></span>
<span class="line">	a <span class="token operator">=</span> b<span class="token punctuation">;</span></span>
<span class="line">	b <span class="token operator">=</span> temp<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span> <span class="token comment">// 也可以替换成typename</span></span>
<span class="line"><span class="token comment">//利用选择排序，进行对数组从大到小的排序</span></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">mySort</span><span class="token punctuation">(</span>T arr<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">int</span> max <span class="token operator">=</span> i<span class="token punctuation">;</span> <span class="token comment">//最大数的下标</span></span>
<span class="line">		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>max<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">			<span class="token punctuation">{</span></span>
<span class="line">				max <span class="token operator">=</span> j<span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		<span class="token keyword">if</span> <span class="token punctuation">(</span>max <span class="token operator">!=</span> i<span class="token punctuation">)</span> <span class="token comment">//如果最大数的下标不是i，交换两者</span></span>
<span class="line">		<span class="token punctuation">{</span></span>
<span class="line">			<span class="token function">mySwap</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>max<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">printArray</span><span class="token punctuation">(</span>T arr<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		cout <span class="token operator">&lt;&lt;</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">//测试char数组</span></span>
<span class="line">	<span class="token keyword">char</span> charArr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;bdcfeagh&quot;</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>charArr<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token function">mySort</span><span class="token punctuation">(</span>charArr<span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token function">printArray</span><span class="token punctuation">(</span>charArr<span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">//测试int数组</span></span>
<span class="line">	<span class="token keyword">int</span> intArr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>intArr<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token function">mySort</span><span class="token punctuation">(</span>intArr<span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token function">printArray</span><span class="token punctuation">(</span>intArr<span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">	<span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">&quot;pause&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_16-2-类模板" tabindex="-1"><a class="header-anchor" href="#_16-2-类模板"><span>16.2 类模板</span></a></h3><ul><li><strong>定义</strong>：定义一个通用类，允许成员变量或成员函数的类型在实例化时指定。</li><li><strong>语法</strong>：使用 <code>template &lt;class T&gt;</code> 声明，后跟类定义。</li></ul><blockquote><p>[!NOTE] 头文件声明的作用，就是让编译器知道，这个函数的定义应该在其他文件中，就不会因为暂时找不到函数的定义而报错。至于找到对应的定义，就是链接器需要干的事情。</p></blockquote><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token comment">//.h文件</span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span></span>
<span class="line"><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token keyword">public</span><span class="token operator">:</span></span>
<span class="line">    <span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span>T a<span class="token punctuation">,</span> T b<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    T value<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//.cpp文件</span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&quot;SingleTon.h&quot;</span></span></span>
<span class="line"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token class-name">MyClass</span><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token class-name">MyClass</span><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span>val<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">value</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">void</span> <span class="token class-name">MyClass</span><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">func</span><span class="token punctuation">(</span>T a<span class="token punctuation">,</span> T b<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">	T temp <span class="token operator">=</span> a<span class="token punctuation">;</span></span>
<span class="line">	a <span class="token operator">=</span> b<span class="token punctuation">;</span></span>
<span class="line">	b <span class="token operator">=</span> temp<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//main.cpp文件</span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;SingleTon.h&quot;</span></span></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">	MyClass<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> myclass<span class="token punctuation">;</span></span>
<span class="line">	myclass<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>SingleToncpp编译时，编译器<strong>没有看到任何具体的实例化类型</strong>（如 <code>SingleTon&lt;int&gt;</code>），因此不会生成 <code>func()</code> 函数的实际代码。</p></li><li><p>模板代码（如 <code>template &lt;typename T&gt; void MyClass&lt;T&gt;::func()</code>）本身不会被编译成目标代码，只是 “蓝图”。</p></li><li><p>链接阶段就会报错：<code>main.cpp</code> 中使用了 <code>MyClass&lt;int&gt;::func()</code>，但 <code>SingleTon.o</code> 中没有该函数的实现，导致链接器无法找到符号定义。 <img src="`+d+`" alt=""></p></li><li><p>所以写在同一个hpp文件中，就不存在上述问题了</p></li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token comment">//myclass.hpp</span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span></span>
<span class="line"><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token keyword">public</span><span class="token operator">:</span></span>
<span class="line">    <span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span>T a<span class="token punctuation">,</span> T b<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    T value<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token class-name">MyClass</span><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token class-name">MyClass</span><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> val<span class="token punctuation">)</span> <span class="token operator">:</span><span class="token function">value</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">void</span> <span class="token class-name">MyClass</span><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">func</span><span class="token punctuation">(</span>T a<span class="token punctuation">,</span> T b<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    T temp <span class="token operator">=</span> a<span class="token punctuation">;</span></span>
<span class="line">    a <span class="token operator">=</span> b<span class="token punctuation">;</span></span>
<span class="line">    b <span class="token operator">=</span> temp<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//main.cpp</span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;myclass.hpp&quot;</span></span></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">	MyClass<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> myclass<span class="token punctuation">;</span></span>
<span class="line">	myclass<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_16-3-对比" tabindex="-1"><a class="header-anchor" href="#_16-3-对比"><span>16.3 对比</span></a></h3><ul><li><p><strong>函数模板</strong>是为了实现与类型无关的通用函数，依赖调用时的类型推导；</p></li><li><p><strong>类模板</strong>是为了创建通用的类结构，需在实例化时显式指定类型参数。</p></li><li><p>函数模板不能部分特化：函数模板只能全特化（如 <code>template&lt;&gt; void swap&lt;int&gt;(int&amp;, int&amp;)</code>），但类模板可以偏特化（如 <code>template&lt;typename T&gt; class Vector&lt;T*&gt;</code>）。</p><ul><li><strong>全特化（Full Specialization）</strong>：为模板的<strong>所有模板参数</strong>指定具体类型，形成一个完全确定的版本。</li><li><strong>偏特化（Partial Specialization）</strong>：为模板的<strong>部分模板参数</strong>指定具体类型，保留其他参数作为模板参数（即 “部分特化，部分泛化”）。</li><li>C++ 标准明确禁止函数模板的偏特化，原因是 <strong>函数重载（Function Overloading）可以完美替代偏特化的需求</strong>，无需额外引入偏特化机制。</li><li>类模板没有 “重载” 机制，因此需要偏特化来针对部分类型定制逻辑。偏特化的类模板与通用模板是不同的类，但共享模板名称。</li></ul></li><li><p>类模板实例化必须显式指定类型：函数调用可以自动推导类型，但类实例化必须显式指定（如 <code>Vector&lt;int&gt;</code>），除非使用 C++17 的类模板参数推导（如 <code>std::pair p(1, &quot;hello&quot;);</code>）。</p></li></ul><table><thead><tr><th style="text-align:center;"><strong>特性</strong></th><th><strong>函数模板</strong></th><th><strong>类模板</strong></th></tr></thead><tbody><tr><td style="text-align:center;"><strong>实例化触发方式</strong></td><td>函数调用时自动推导或显式指定</td><td>必须显式指定模板参数（如 <code>Vector&lt;int&gt;</code>）</td></tr><tr><td style="text-align:center;"><strong>类型推导</strong></td><td>支持自动类型推导（如 <code>max(1, 2)</code>）</td><td>不支持自动推导，需显式指定类型</td></tr><tr><td style="text-align:center;"><strong>特化（Specialization）</strong></td><td>支持全特化（如 <code>template&lt;&gt; int max&lt;int&gt;(int, int)</code>）</td><td>支持全特化和偏特化（如 <code>template&lt;typename T&gt; class Vector&lt;T*&gt;</code>）</td></tr><tr><td style="text-align:center;"><strong>默认模板参数</strong></td><td>C++11 起支持（如 <code>template&lt;typename T = int&gt;</code>）</td><td>支持，且更常见（如 <code>template&lt;typename T = int&gt; class Stack</code>）</td></tr><tr><td style="text-align:center;"><strong>用途</strong></td><td>通用算法（如 <code>std::sort</code>、<code>std::swap</code>）</td><td>容器类（如 <code>std::vector</code>、<code>std::map</code>）、工具类</td></tr></tbody></table><h2 id="_17-stl汇总" tabindex="-1"><a class="header-anchor" href="#_17-stl汇总"><span>17. STL汇总</span></a></h2><h3 id="string" tabindex="-1"><a class="header-anchor" href="#string"><span>string</span></a></h3><ul><li>构造 <ul><li><code>string();</code> //创建一个空的字符串 例如: string str;</li><li><code>string(const char* s);</code> //使用字符串s初始化</li><li><code>string(const string&amp; str);</code> //使用一个string对象初始化另一个string对象</li><li><code>string(int n, char c);</code> //使用n个字符c初始化</li></ul></li><li>赋值 <ul><li><code>string&amp; operator=(const char* s);</code> //char*类型字符串 赋值给当前的字符串</li><li><code>string&amp; operator=(const string &amp;s);</code> //把字符串s赋给当前的字符串</li><li><code>string&amp; operator=(char c);</code> //字符赋值给当前的字符串</li><li><code>string&amp; assign(const char *s);</code> //把字符串s赋给当前的字符串</li><li><code>string&amp; assign(const char *s, int n);</code> //把字符串s的前n个字符赋给当前的字符串</li><li><code>string&amp; assign(const string &amp;s);</code> //把字符串s赋给当前字符串</li><li><code>string&amp; assign(int n, char c);</code> //用n个字符c赋给当前字符串</li></ul></li><li>拼接 <ul><li><code>string&amp; operator+=(const char* str);</code> //重载+=操作符</li><li><code>string&amp; operator+=(const char c);</code> //重载+=操作符</li><li><code>string&amp; operator+=(const string&amp; str);</code> //重载+=操作符</li><li><code>string&amp; append(const char *s);</code> //把字符串s连接到当前字符串结尾</li><li><code>string&amp; append(const char *s, int n);</code> //把字符串s的前n个字符连接到当前字符串结尾</li><li><code>string&amp; append(const string &amp;s);</code> //同operator+=(const string&amp; str)</li><li><code>string&amp; append(const string &amp;s, int pos, int n);</code>//字符串s中从pos开始的n个字符连接到字符串结尾</li></ul></li><li>查找替换 <ul><li><code>int find(const string&amp; str, int pos = 0) const;</code> //查找str第一次出现位置,从pos开始查找</li><li><code>int find(const char* s, int pos = 0) const;</code> //查找s第一次出现位置,从pos开始查找</li><li><code>int find(const char* s, int pos, int n) const;</code> //从pos位置查找s的前n个字符第一次位置</li><li><code>int find(const char c, int pos = 0) const;</code> //查找字符c第一次出现位置</li><li><code>int rfind(const string&amp; str, int pos = npos) const;</code> //查找str最后一次位置,从pos开始查找</li><li><code>int rfind(const char* s, int pos = npos) const;</code> //查找s最后一次出现位置,从pos开始查找</li><li><code>int rfind(const char* s, int pos, int n) const;</code> //从pos查找s的前n个字符最后一次位置</li><li><code>int rfind(const char c, int pos = 0) const;</code> //查找字符c最后一次出现位置</li><li><code>string&amp; replace(int pos, int n, const string&amp; str);</code> //替换从pos开始n个字符为字符串str</li><li><code>string&amp; replace(int pos, int n,const char* s);</code> //替换从pos开始的n个字符为字符串s</li></ul></li><li>字符串比较 <ul><li><code>int compare(const string &amp;s) const;</code> //与字符串s比较</li><li><code>int compare(const char *s) const;</code> //与字符串s比较</li></ul></li><li>字符存取 <ul><li><code>char&amp; operator[](int n);</code> //通过[]方式取字符</li><li><code>char&amp; at(int n);</code> //通过at方法获取字符</li></ul></li><li>插入删除 <ul><li><code>string&amp; insert(int pos, const char* s);</code> //插入字符串</li><li><code>string&amp; insert(int pos, const string&amp; str);</code> //插入字符串</li><li><code>string&amp; insert(int pos, int n, char c);</code> //在指定位置插入n个字符c</li><li><code>string&amp; erase(int pos, int n = npos);</code> //删除从Pos开始的n个字符</li></ul></li><li>提取字串 <ul><li><code>string substr(int pos = 0, int n = npos) const;</code> //返回由pos开始的n个字符组成的字符串</li></ul></li></ul><h3 id="vector" tabindex="-1"><a class="header-anchor" href="#vector"><span>vector</span></a></h3><ul><li>构造 <ul><li><code>vector&lt;T&gt; v;</code> //采用模板实现类实现，默认构造函数</li><li><code>vector(v.begin(), v.end());</code> //将v[begin(), end())区间中的元素拷贝给本身。</li><li><code>vector(n, elem);</code> //构造函数将n个elem拷贝给本身。</li><li><code>vector(const vector &amp;vec);</code> //拷贝构造函数。</li></ul></li><li>赋值 <ul><li><code>vector&amp; operator=(const vector &amp;vec);</code>//重载等号操作符</li><li><code>assign(beg, end);</code> //将[beg, end)区间中的数据拷贝赋值给本身。</li><li><code>assign(n, elem);</code> //将n个elem拷贝赋值给本身。</li></ul></li><li>容量和大小 <ul><li><code>empty(); </code>//判断容器是否为空</li><li><code>capacity();</code>//容器的容量</li><li><code>size();</code>//返回容器中元素的个数</li><li><code>resize(int num);</code>//重新指定容器的长度为num，若容器变长，则以默认值填充新位置。如果容器变短，则末尾超出容器长度的元素被删除。这里改变的是size，不是capacity</li><li><code>resize(int num, elem);</code> //重新指定容器的长度为num，若容器变长，则以elem值填充新位置。如果容器变短，则末尾超出容器长度的元素被删除</li></ul></li><li>插入和删除 <ul><li><code>push_back(ele);</code> //尾部插入元素ele</li><li><code>pop_back();</code> //删除最后一个元素</li><li><code>insert(const_iterator pos, ele);</code> //迭代器指向位置pos插入元素ele</li><li><code>insert(const_iterator pos, int count,ele);</code>//迭代器指向位置pos插入count个元素ele</li><li><code>erase(const_iterator pos);</code> //删除迭代器指向的元素</li><li><code>erase(const_iterator start, const_iterator end);</code>//删除迭代器从start到end之间的元素</li><li><code>clear();</code> //删除容器中所有元素</li></ul></li><li>数据存取 <ul><li><code> at(int idx);</code> //返回索引idx所指的数据</li><li><code> operator[];</code> //返回索引idx所指的数据</li><li><code> front();</code> //返回容器中第一个数据元素</li><li><code>back();</code> //返回容器中最后一个数据元素</li></ul></li><li>互换容器 <ul><li><code>swap(vec);</code> // 将vec与本身的元素互换，swap可以使两个容器互换，可以达到实用的收缩内存效果</li></ul></li><li>预留空间 <ul><li><code>reserve(int len);</code>//容器预留len个元素长度，预留位置不初始化，元素不可访问。减少vector在动态扩展容量时的扩展次数</li></ul></li></ul><h3 id="deque" tabindex="-1"><a class="header-anchor" href="#deque"><span>deque</span></a></h3><ul><li>构造 <ul><li><code>deque&lt;T&gt;</code> deqT; //默认构造形式</li><li><code>deque(beg, end);</code> //构造函数将[beg, end)区间中的元素拷贝给本身。</li><li><code>deque(n, elem);</code> //构造函数将n个elem拷贝给本身。</li><li><code>deque(const deque &amp;deq);</code> //拷贝构造函数</li></ul></li><li>赋值 <ul><li><code> deque&amp; operator=(const deque &amp;deq);</code>//重载等号操作符</li><li><code>assign(beg, end);</code>//将[beg, end)区间中的数据拷贝赋值给本身。</li><li><code>assign(n, elem);</code> //将n个elem拷贝赋值给本身。</li></ul></li><li>大小操作 <ul><li><code>deque.empty();</code> //判断容器是否为空</li><li><code>deque.size();</code> //返回容器中元素的个数</li><li><code>deque.resize(num);</code> //重新指定容器的长度为num,若容器变长，则以默认值填充新位置。如果容器变短，则末尾超出容器长度的元素被删除。</li><li><code>deque.resize(num, elem);</code> //重新指定容器的长度为num,若容器变长，则以elem值填充新位置。如果容器变短，则末尾超出容器长度的元素被删除。</li></ul></li><li>插入和删除 两端插入操作： <ul><li><code>push_back(elem);</code> //在容器尾部添加一个数据</li><li><code>push_front(elem);</code> //在容器头部插入一个数据</li><li><code>pop_back();</code> //删除容器最后一个数据</li><li><code>pop_front();</code> //删除容器第一个数据 指定位置操作：</li><li><code>insert(pos,elem);</code> //在pos位置插入一个elem元素的拷贝，返回新数据的位置。</li><li><code>insert(pos,n,elem);</code> //在pos位置插入n个elem数据，无返回值。</li><li><code>insert(pos,beg,end);</code> //在pos位置插入[beg,end)区间的数据，无返回值。</li><li><code>clear();</code> //清空容器的所有数据</li><li><code>erase(beg,end);</code> //删除[beg,end)区间的数据，返回下一个数据的位置。</li><li><code>erase(pos);</code> //删除pos位置的数据，返回下一个数据的位置。</li></ul></li><li>数据存取 <ul><li><code>at(int idx); </code> //返回索引idx所指的数据</li><li><code>operator[]; </code> //返回索引idx所指的数据</li><li><code>front(); </code> //返回容器中第一个数据元素</li><li><code>back();</code> //返回容器中最后一个数据元素</li></ul></li></ul><h3 id="stack" tabindex="-1"><a class="header-anchor" href="#stack"><span>stack</span></a></h3><ul><li>构造 <ul><li><code>stack&lt;T&gt; stk;</code> //stack采用模板类实现， stack对象的默认构造形式</li><li><code>stack(const stack &amp;stk);</code> //拷贝构造函数</li></ul></li><li>赋值 <ul><li><code>stack&amp; operator=(const stack &amp;stk);</code> //重载等号操作符</li></ul></li><li>数据存取： <ul><li><code>push(elem);</code> //向栈顶添加元素</li><li><code>pop();</code> //从栈顶移除第一个元素</li><li><code>top(); </code> //返回栈顶元素</li></ul></li><li>大小操作： <ul><li><code>empty();</code> //判断堆栈是否为空</li><li><code>size(); </code> //返回栈的大小</li></ul></li></ul><h3 id="queue" tabindex="-1"><a class="header-anchor" href="#queue"><span>queue</span></a></h3><ul><li>构造 <ul><li><code>queue&lt;T&gt; que;</code>//queue采用模板类实现，queue对象的默认构造形式</li><li><code>queue(const queue &amp;que);</code>//拷贝构造函数</li></ul></li><li>赋值 <ul><li><code>queue&amp; operator=(const queue &amp;que);</code>//重载等号操作符</li></ul></li><li>数据存取 <ul><li><code>push(elem);</code> //往队尾添加元素</li><li><code>pop();</code> //从队头移除第一个元素</li><li><code>back();</code> //返回最后一个元素</li><li><code>front(); </code> //返回第一个元素</li></ul></li><li>大小操作： <ul><li><code>empty();</code> //判断堆栈是否为空</li><li><code>size(); </code> //返回栈的大小</li></ul></li></ul><h3 id="list" tabindex="-1"><a class="header-anchor" href="#list"><span>list</span></a></h3><ul><li>构造 <ul><li><code>list&lt;T&gt; lst;</code> //list采用采用模板类实现,对象的默认构造形式：</li><li><code>list(beg,end);</code> //构造函数将[beg, end)区间中的元素拷贝给本身。</li><li><code>list(n,elem);</code>//构造函数将n个elem拷贝给本身。</li><li><code>list(const list &amp;lst);</code>//拷贝构造函数。</li></ul></li><li>赋值 <ul><li><code>assign(beg, end);</code> //将[beg, end)区间中的数据拷贝赋值给本身。</li><li><code>assign(n, elem);</code> //将n个elem拷贝赋值给本身。</li><li><code>list&amp; operator=(const list &amp;lst);</code> //重载等号操作符</li></ul></li><li>交换 <ul><li><code>swap(lst);</code>//将lst与本身的元素互换。L1.swap(L2);</li></ul></li><li>大小操作 <ul><li><code>size();</code>//返回容器中元素的个数</li><li><code>empty();</code>//判断容器是否为空</li><li><code>resize(num);</code>//重新指定容器的长度为num，若容器变长，则以默认值填充新位置。如果容器变短，则末尾超出容器长度的元素被删除。</li><li><code>resize(num, elem);</code>//重新指定容器的长度为num，若容器变长，则以elem值填充新位置。如果容器变短，则末尾超出容器长度的元素被删除。</li></ul></li><li>插入和删除 <ul><li><code>push_back(elem);</code>//在容器尾部加入一个元素</li><li><code>pop_back();</code>//删除容器中最后一个元素</li><li><code>push_front(elem);</code>//在容器开头插入一个元素</li><li><code>pop_front();</code>//从容器开头移除第一个元素</li><li><code>insert(pos,elem);</code>//在pos位置插elem元素的拷贝，返回新数据的位置。</li><li><code>insert(pos,n,elem);</code>//在pos位置插入n个elem数据，无返回值。</li><li><code>insert(pos,beg,end);</code>//在pos位置插入[beg,end)区间的数据，无返回值。</li><li><code>clear();</code>//移除容器的所有数据</li><li><code>erase(beg,end);</code>//删除[beg,end)区间的数据，返回下一个数据的位置。</li><li><code>erase(pos);</code>//删除pos位置的数据，返回下一个数据的位置。</li><li><code>remove(elem);</code>//删除容器中所有与elem值匹配的元素。</li></ul></li><li>数据存取 <ul><li><code>front();</code> //返回第一个元素。</li><li><code>back();</code> //返回最后一个元素。</li></ul></li><li>反转和排序 <ul><li><code>reverse();</code> //反转链表 L.reverse();</li><li><code>sort();</code> //链表排序 L.sort(myCompare); //指定规则，从大到小</li></ul></li></ul><h3 id="set-multiset" tabindex="-1"><a class="header-anchor" href="#set-multiset"><span>set/multiset</span></a></h3><ul><li>构造 <ul><li><code>set&lt;T&gt; st;</code> //默认构造函数：</li><li><code>set(const set &amp;st);</code> //拷贝构造函数</li></ul></li><li>赋值 <ul><li><code>set&amp; operator=(const set &amp;st);</code> //重载等号操作符</li></ul></li><li>大小操作 <ul><li><code>size();</code> //返回容器中元素的数目</li><li><code>empty();</code> //判断容器是否为空</li></ul></li><li>交换 <ul><li><code>swap(st);</code> //交换两个集合容器 s1.swap(s2);</li></ul></li><li>插入和删除 <ul><li><code>insert(elem);</code> //在容器中插入元素。</li><li><code>clear();</code> //清除所有元素</li><li><code>erase(pos);</code> //删除pos迭代器所指的元素，返回下一个元素的迭代器。</li><li><code>erase(beg, end);</code> //删除区间[beg,end)的所有元素 ，返回下一个元素的迭代器。</li><li><code>erase(elem);</code> //删除容器中值为elem的元素。</li></ul></li><li>查找和统计 <ul><li><code>find(key);</code>//查找key是否存在,若存在，返回该键的元素的迭代器；若不存在，返回set.end();</li><li><code>count(key);</code>//统计key的元素个数</li></ul></li></ul><h3 id="pair" tabindex="-1"><a class="header-anchor" href="#pair"><span>pair</span></a></h3><ul><li>构造 <ul><li><code>pair&lt;type, type&gt; p ( value1, value2 );</code></li><li><code>pair&lt;type, type&gt; p = make_pair( value1, value2 );</code></li></ul></li></ul><h3 id="map-multimap" tabindex="-1"><a class="header-anchor" href="#map-multimap"><span>map/multimap</span></a></h3><p>构造 - <code>map&lt;T1, T2&gt; mp;</code> //map默认构造函数: - <code>map(const map &amp;mp);</code> //拷贝构造函数 赋值 - <code>map&amp; operator=(const map &amp;mp);</code> //重载等号操作符</p><ul><li>大小操作 <ul><li><code>size();</code> //返回容器中元素的数目</li><li><code>empty();</code> //判断容器是否为空</li></ul></li><li>交换 <ul><li><code>swap(st);</code> //交换两个集合容器</li></ul></li><li>插入和删除 <ul><li><code>insert(elem);</code> //在容器中插入元素。</li><li><code>clear();</code> //清除所有元素</li><li><code>erase(pos);</code> //删除pos迭代器所指的元素，返回下一个元素的迭代器。</li><li><code>erase(beg, end);</code> //删除区间[beg,end)的所有元素 ，返回下一个元素的迭代器。</li><li><code>erase(key);</code> //删除容器中值为key的元素。</li></ul></li><li>查找和统计 <ul><li><code>find(key);</code>//查找key是否存在,若存在，返回该键的元素的迭代器；若不存在，返回set.end();</li><li><code>count(key);</code>//统计key的元素个数</li></ul></li></ul><h3 id="内建函数对象" tabindex="-1"><a class="header-anchor" href="#内建函数对象"><span>内建函数对象</span></a></h3><ul><li>算术仿函数 <ul><li><code>template&lt;class T&gt; T plus&lt;T&gt;</code> //加法仿函数</li><li><code>template&lt;class T&gt; T minus&lt;T&gt;</code> //减法仿函数</li><li><code>template&lt;class T&gt; T multiplies&lt;T&gt;</code> //乘法仿函数</li><li><code>template&lt;class T&gt; T divides&lt;T&gt;</code> //除法仿函数</li><li><code>template&lt;class T&gt; T modulus&lt;T&gt;</code> //取模仿函数</li><li><code>template&lt;class T&gt; T negate&lt;T&gt;</code> //取反仿函数</li></ul></li><li>关系仿函数 <ul><li><code>template&lt;class T&gt; bool equal_to&lt;T&gt;</code> //等于</li><li><code>template&lt;class T&gt; bool not_equal_to&lt;T&gt;</code> //不等于</li><li><code>template&lt;class T&gt; bool greater&lt;T&gt;</code> //大于</li><li><code>template&lt;class T&gt; bool greater_equal&lt;T&gt;</code> //大于等于</li><li><code>template&lt;class T&gt; bool less&lt;T&gt;</code> //小于</li><li><code>template&lt;class T&gt; bool less_equal&lt;T&gt;</code> //小于等于</li></ul></li><li>逻辑仿函数 <ul><li><code>template&lt;class T&gt; bool logical_and&lt;T&gt;</code> //逻辑与</li><li><code>template&lt;class T&gt; bool logical_or&lt;T&gt;</code> //逻辑或</li><li><code>template&lt;class T&gt; bool logical_not&lt;T&gt;</code> //逻辑非</li></ul></li></ul><h3 id="遍历" tabindex="-1"><a class="header-anchor" href="#遍历"><span>遍历</span></a></h3><ul><li><code>for_each(iterator beg, iterator end, _func); </code> // 遍历算法 遍历容器元素 // beg 开始迭代器 // end 结束迭代器 // _func 函数或者函数对象</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">void</span> <span class="token function">MyPrint</span><span class="token punctuation">(</span><span class="token keyword">int</span> val<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">	cout <span class="token operator">&lt;&lt;</span> val <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token function">for_each</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> MyPrint<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="搬运" tabindex="-1"><a class="header-anchor" href="#搬运"><span>搬运</span></a></h3><ul><li><code>transform(iterator beg1, iterator end1, iterator beg2, _func);</code> //beg1 源容器开始迭代器 //end1 源容器结束迭代器 //beg2 目标容器开始迭代器 //_func 函数或者函数对象</li></ul><h3 id="查找统计" tabindex="-1"><a class="header-anchor" href="#查找统计"><span>查找统计</span></a></h3><ul><li><code>find(iterator beg, iterator end, value);</code>//按值查找元素，找到返回指定位置迭代器，找不到返回结束迭代器位置 // beg 开始迭代器 end 结束迭代器value 查找的元素 利用find可以在容器中找指定的元素，返回值是<strong>迭代器</strong></li><li><code>find_if(iterator beg, iterator end, _Pred);</code> // 按值查找元素，找到返回指定位置迭代器，找不到返回结束迭代器位置 // beg 开始迭代器 // end 结束迭代器 // _Pred 函数或者谓词（返回bool类型的仿函数） find_if按条件查找使查找更加灵活，提供的仿函数可以改变不同的策略</li><li><code> adjacent_find(iterator beg, iterator end);</code> // 查找相邻重复元素,返回相邻元素的第一个位置的迭代器 // beg 开始迭代器 // end 结束迭代器 面试题中如果出现查找相邻重复元素，记得用STL中的adjacent_find算法</li><li><code> bool binary_search(iterator beg, iterator end, value);</code> // 查找指定的元素，查到 返回true 否则false // 注意: 在<strong>无序序列中不可用</strong> // beg 开始迭代器 // end 结束迭代器 // value 查找的元素 二分查找法查找效率很高，值得注意的是查找的容器中元素必须的有序序列</li><li><code>count(iterator beg, iterator end, value);</code> // 统计元素出现次数 // beg 开始迭代器 // end 结束迭代器 // value 统计的元素 统计自定义数据类型时候，需要配合重载 <code>operator==</code></li><li><code>count_if(iterator beg, iterator end, _Pred);</code> // 按条件统计元素出现次数 // beg 开始迭代器 // end 结束迭代器 // _Pred 谓词 按值统计用count，按条件统计用count_if</li></ul><h3 id="排序" tabindex="-1"><a class="header-anchor" href="#排序"><span>排序</span></a></h3><ul><li><code> sort(iterator beg, iterator end, _Pred);</code> // 按值查找元素，找到返回指定位置迭代器，找不到返回结束迭代器位置 // beg 开始迭代器 // end 结束迭代器 // _Pred 谓词</li><li><code> random_shuffle(iterator beg, iterator end);</code> // 指定范围内的元素随机调整次序 // beg 开始迭代器 // end 结束迭代器 random_shuffle洗牌算法比较实用，使用时记得加随机数种子</li><li><code>merge(iterator beg1, iterator end1, iterator beg2, iterator end2, iterator dest);</code> // 容器元素合并，并存储到另一容器中 // 注意: 两个容器必须是<strong>有序的</strong> // beg1 容器1开始迭代器 // end1 容器1结束迭代器 // beg2 容器2开始迭代器 // end2 容器2结束迭代器 // dest 目标容器开始迭代器 merge合并的两个容器必须的有序序列</li><li><code>reverse(iterator beg, iterator end); </code> // 反转指定范围的元素 // beg 开始迭代器 // end 结束迭代器</li></ul><h3 id="拷贝" tabindex="-1"><a class="header-anchor" href="#拷贝"><span>拷贝</span></a></h3><ul><li><code> copy(iterator beg, iterator end, iterator dest);</code> // beg 开始迭代器 // end 结束迭代器 // dest 目标起始迭代器 利用copy算法在拷贝时，目标容器记得提前开辟空间</li></ul><h3 id="替换" tabindex="-1"><a class="header-anchor" href="#替换"><span>替换</span></a></h3><ul><li><code> replace(iterator beg, iterator end, oldvalue, newvalue);</code> // 将区间内旧元素 替换成 新元素 // beg 开始迭代器 // end 结束迭代器 // oldvalue 旧元素 // newvalue 新元素</li><li><code> replace_if(iterator beg, iterator end, _pred, newvalue);</code> // 按条件替换元素，满足条件的替换成指定元素 // beg 开始迭代器 // end 结束迭代器 // _pred 谓词 // newvalue 替换的新元素</li></ul><h3 id="交换" tabindex="-1"><a class="header-anchor" href="#交换"><span>交换</span></a></h3><ul><li><code>swap(container c1, container c2);</code> // 互换两个容器的元素 // c1容器1 // c2容器2 swap交换容器时，注意交换的容器要同种类型</li></ul><h3 id="算术" tabindex="-1"><a class="header-anchor" href="#算术"><span>算术</span></a></h3><ul><li><code>accumulate(iterator beg, iterator end, value);</code> // 计算容器元素累计总和 // beg 开始迭代器 // end 结束迭代器 // value 起始值</li></ul><h3 id="填充" tabindex="-1"><a class="header-anchor" href="#填充"><span>填充</span></a></h3><ul><li><code>fill(iterator beg, iterator end, value);</code> // 向容器中填充元素 // beg 开始迭代器 // end 结束迭代器 // value 填充的值</li></ul><h3 id="集合" tabindex="-1"><a class="header-anchor" href="#集合"><span>集合</span></a></h3><ul><li><code>set_intersection(iterator beg1, iterator end1, iterator beg2, iterator end2, iterator dest);</code> // 求两个集合的交集 // <strong>注意:两个集合必须是有序序列</strong> // beg1 容器1开始迭代器 // end1 容器1结束迭代器 // beg2 容器2开始迭代器 // end2 容器2结束迭代器 // dest 目标容器开始迭代器 求交集的两个集合必须的有序序列 目标容器开辟空间需要从<strong>两个容器中取小值</strong> set_intersection返回值即是交集中最后一个元素的位置</li><li><code>set_union(iterator beg1, iterator end1, iterator beg2, iterator end2, iterator dest);</code> // 求两个集合的并集 // <strong>注意:两个集合必须是有序序列</strong> // beg1 容器1开始迭代器 // end1 容器1结束迭代器 // beg2 容器2开始迭代器 // end2 容器2结束迭代器 // dest 目标容器开始迭代器 求并集的两个集合必须的有序序列 目标容器开辟空间需要<strong>两个容器相加</strong> set_union返回值既是并集中最后一个元素的位置</li><li><code>set_difference(iterator beg1, iterator end1, iterator beg2, iterator end2, iterator dest);</code> // 求两个集合的差集 // <strong>注意:两个集合必须是有序序列</strong> // beg1 容器1开始迭代器 // end1 容器1结束迭代器 // beg2 容器2开始迭代器 // end2 容器2结束迭代器 // dest 目标容器开始迭代器 求差集的两个集合必须的有序序列 目标容器开辟空间需要从<strong>两个容器取较大值</strong> set_difference返回值既是差集中最后一个元素的位置</li></ul><h2 id="_18-c-的map" tabindex="-1"><a class="header-anchor" href="#_18-c-的map"><span>18. C++的Map</span></a></h2><h3 id="_18-1-tree与map" tabindex="-1"><a class="header-anchor" href="#_18-1-tree与map"><span>18.1 Tree与Map</span></a></h3><ul><li>树结构的核心是 “层级嵌套的节点”，每个节点通常存储一个值</li><li>Map 的核心是 “键值对（KV）映射”，通过键快速查找值。</li><li>普通的树结构（如二叉树）只能按 “节点值” 排序，普通的 Map（如哈希表）虽然查询快，但键是无序的。</li></ul><h3 id="_18-2-tree与map结合" tabindex="-1"><a class="header-anchor" href="#_18-2-tree与map结合"><span>18.2 Tree与Map结合</span></a></h3><ul><li>“树节点” 不再只存一个值，而是 存储一个键值对（Key + Value）；</li><li>树的排序规则基于 “键（Key）”，而非值（Value）—— 左子树的所有节点的键 &lt; 根节点的键，右子树的所有节点的键 &gt; 根节点的键（二叉搜索树的特性）。</li><li>由于树的有序性，Map 可以直接支持 “按键排序” 的操作（如获取键的升序 / 降序集合、查找大于 / 小于某个键的所有键值对）。</li><li>平衡树保证效率：用红黑树等平衡二叉树避免了普通二叉树可能退化为链表的问题，插入、查询、删除的时间复杂度稳定在 O (log n)。</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token comment">//节点结构</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span></span>
<span class="line">    Key key<span class="token punctuation">;</span>    <span class="token comment">// 键（用于排序和查找）</span></span>
<span class="line">    Value value<span class="token punctuation">;</span> <span class="token comment">// 值（实际要存储的数据）</span></span>
<span class="line">    Node left<span class="token punctuation">;</span>  <span class="token comment">// 左子节点（键 &lt; 当前节点的键）</span></span>
<span class="line">    Node right<span class="token punctuation">;</span> <span class="token comment">// 右子节点（键 &gt; 当前节点的键）</span></span>
<span class="line">    <span class="token comment">// 其他辅助字段（如红黑树的颜色标记）</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+k+`" alt="600"></p><h3 id="_18-3-map" tabindex="-1"><a class="header-anchor" href="#_18-3-map"><span>18.3 Map</span></a></h3><ul><li><p>STL中的Map：红黑树</p></li><li><p>map是一个有序的容器，它按照键的升序进行排序并存储元素。每个键唯一且不可重复，同时与一个值关联。</p></li><li><p>map的底层实现采用红黑树（Red-Black Tree），这是一种自平衡二叉搜索树。红黑树保持了良好的平衡性能，确保了在任何情况下对map进行插入、删除和查找操作的时间复杂度为O(logN)，其中N是元素的数量。</p></li><li><p>由于红黑树的平衡特性，map适用于需要频繁查找键值对的场景。map适合在元素有序存储和访问的情况下使用，特别是当需要根据键值进行快速查找时。例如，可以使用map来实现字典、索引表、排行榜等数据结构。</p></li></ul><h3 id="_18-4-unordered-map" tabindex="-1"><a class="header-anchor" href="#_18-4-unordered-map"><span>18.4 unordered_map</span></a></h3><ul><li><p>STL的unordered_map容器是一个哈希表（Hash Table）实现的关联容器，它提供了高效的插入、删除和查找操作。</p></li><li><p>哈希映射：unordered_map内部使用哈希函数将键映射到存储桶（bucket）中，以实现快速的查找操作。由于哈希函数的作用，元素在容器中的存储位置是根据键的哈希值决定的，而不是按照键的顺序。</p></li><li><p>快速的插入和查找：unordered_map具有接近常数时间（平均情况下）的插入、删除和查找操作。通过哈希映射和O(1)的平均时间复杂度，可以实现高效的元素访问。</p></li><li><p>无序性：unordered_map中的元素没有固定的顺序，与插入的顺序无关。这种无序性使得unordered_map适用于不需要保持元素顺序的需求，例如字典、索引等。</p></li><li><p>唯一键：每个键在unordered_map中是唯一的，即同一个键只能插入一个值。</p></li><li><p>冲突解决：当多个元素被映射到同一个存储桶时，会发生哈希冲突。unordered_map使用链地址法（chaining）来处理冲突，即在同一个存储桶中通过链表或者其他数据结构将冲突的元素链接起来。</p></li></ul><h3 id="_18-5-set和unordered-set" tabindex="-1"><a class="header-anchor" href="#_18-5-set和unordered-set"><span>18.5 Set和unordered_set</span></a></h3><ul><li>set 是一个关联型容器，和 map 一样，它的底层结构是红黑树，但和 map 不一样的是，set 是直接保存 value 的，或者说，set 中的 value 就是 key。unordered_set同理类比unordered_map</li></ul><h3 id="_18-6-如何选择" tabindex="-1"><a class="header-anchor" href="#_18-6-如何选择"><span>18.6 如何选择</span></a></h3><ul><li>选择map还是unordered_map取决于对有序性、插入和删除操作频率以及内存占用的需求。如果需要元素有序并且较少的插入/删除操作，可以选择map；如果对有序性不敏感并且需要高效的插入/删除操作，可以选择unordered_map。</li></ul><ol><li><p>查找操作的需求：如果你更关注元素的有序性，并且需要根据键进行快速的查找操作，那么应该选择map。map中的元素按键的顺序进行排序，因此可以使用二分查找等算法来高效地查找元素。</p></li><li><p>插入和删除操作的频率：如果你需要频繁地插入和删除元素，并且对于查找操作的顺序不敏感，那么应该选择unordered_map。unordered_map使用散列表作为底层数据结构，插入和删除操作的时间复杂度通常是常数级别的，而不会受到键的顺序影响。</p></li><li><p>内存占用的考虑：由于unordered_map使用散列表，它往往需要比map更多的内存空间来存储散列桶和链表或其他解决冲突的数据结构。如果内存占用是一个重要的考虑因素，可能需要权衡使用unordered_map所带来的额外内存消耗。</p></li><li><p>键的哈希函数和相等比较：在使用unordered_map时，需要确保键类型具有良好的哈希函数和相等比较操作符。如果键类型不提供这些操作，或者它们的性能较低，可能需要手动提供自定义的哈希函数和相等比较操作符。</p></li></ol><h2 id="_19-位运算" tabindex="-1"><a class="header-anchor" href="#_19-位运算"><span>19. 位运算</span></a></h2><ul><li>运算符</li></ul><table><thead><tr><th style="text-align:center;"><strong>符号</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td style="text-align:center;">&amp;</td><td>按位与</td></tr><tr><td style="text-align:center;">|</td><td>按位或</td></tr><tr><td style="text-align:center;">^</td><td>按位异或</td></tr><tr><td style="text-align:center;">~</td><td>取反</td></tr><tr><td style="text-align:center;">&lt;&lt;</td><td>左移</td></tr><tr><td style="text-align:center;">&gt;&gt;</td><td>右移动</td></tr></tbody></table><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token comment">//举例</span></span>
<span class="line">y<span class="token operator">|=</span><span class="token number">1LL</span><span class="token operator">&lt;&lt;</span>位数</span>
<span class="line"></span>
<span class="line"><span class="token comment">//判断一个数n ，是不是2的整数幂。</span></span>
<span class="line">cin<span class="token operator">&gt;&gt;</span>n<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">&amp;</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">&quot;NO&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">else</span> cout<span class="token operator">&lt;&lt;</span><span class="token string">&quot;Yes&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//计算一个数的二进制中1的个数:</span></span>
<span class="line"><span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>num<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">unsigned</span> <span class="token keyword">int</span> flag <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line">cin<span class="token operator">&gt;&gt;</span>num<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">while</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">if</span><span class="token punctuation">(</span>num <span class="token operator">&amp;</span> flag<span class="token punctuation">)</span></span>
<span class="line">		n<span class="token operator">++</span><span class="token punctuation">;</span></span>
<span class="line">	flag <span class="token operator">=</span> flag<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">cout<span class="token operator">&lt;&lt;</span>n<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_20-stream" tabindex="-1"><a class="header-anchor" href="#_20-stream"><span>20. stream</span></a></h2><h3 id="_20-1-流类" tabindex="-1"><a class="header-anchor" href="#_20-1-流类"><span>20.1 流类</span></a></h3><ul><li>数据输入和输出的过程也是数据传输的过程。数据像水一样从一个地方流动到另一个地方，因此，在 C++将此过程称为 “流（stream）”。在 C++ 的标准类库中，将用于进行数据输入输出的类统称为“流类”。</li><li><code>cin</code> 是 <code>istream</code> 类的对象（输入流类），用于处理标准输入（通常是键盘）。</li><li><code>cout</code> 是 <code>ostream</code> 类的对象（输出流类），用于处理标准输出（通常是屏幕）。</li><li>标准库在初始化时会自动创建 <code>cin</code>、<code>cout</code> 等全局对象，并关联到对应的硬件设备（键盘 / 屏幕）。</li></ul><p><img src="`+m+'" alt="700"><img src="'+v+`" alt="700"></p><h3 id="_20-2-ios-base类" tabindex="-1"><a class="header-anchor" href="#_20-2-ios-base类"><span>20.2 ios_base类</span></a></h3><ul><li><code>ios_base</code>：最顶层的抽象基类，封装了所有流的<strong>格式控制</strong>（如对齐方式、数值进制）和<strong>状态管理</strong>（如错误标志），与具体的输入输出操作无关。</li></ul><h3 id="_20-3-ios类" tabindex="-1"><a class="header-anchor" href="#_20-3-ios类"><span>20.3 ios类</span></a></h3><ul><li><code>ios</code>：继承自 <code>ios_base</code>，增加了与模板类型相关的接口（C++ 标准中为 <code>template &lt;class charT, class traits = char_traits&lt;charT&gt;&gt; class basic_ios</code>），是后续输入输出流的直接基类。</li><li>核心功能：管理流的状态和格式控制，不直接处理输入输出。 <ul><li>状态标志：如 <code>eofbit</code>（到达文件尾）、<code>failbit</code>（操作失败）、<code>badbit</code>（流损坏）等，可通过 <code>good()</code>、<code>eof()</code>、<code>fail()</code> 等成员函数判断。</li><li>格式控制：如 <code>setf()</code>（设置格式，如左对齐、十六进制）、<code>precision()</code>（设置浮点数精度）等。</li></ul></li><li>使用场景：所有流对象（如 <code>cin</code>、<code>cout</code>、<code>fstream</code> 对象）都继承了 <code>ios</code> 的成员，因此都能使用这些状态和格式功能。</li></ul><h3 id="_20-4-iostream类" tabindex="-1"><a class="header-anchor" href="#_20-4-iostream类"><span>20.4 iostream类</span></a></h3><ul><li><code>istream</code>：继承自 <code>ios</code>，是<strong>输入流的基类</strong>（模板类为 <code>basic_istream</code>），定义了核心输入操作（如 <code>&gt;&gt;</code> 提取运算符、<code>get()</code>、<code>read()</code> 等）。</li><li><code>ostream</code>：继承自 <code>ios</code>，是<strong>输出流的基类</strong>（模板类为 <code>basic_ostream</code>），定义了核心输出操作（如 <code>&lt;&lt;</code> 插入运算符、<code>put()</code>、<code>write()</code> 等）。</li><li><code>iostream</code>：多重继承自 <code>istream</code> 和 <code>ostream</code>，是<strong>双向流的基类</strong>（模板类为 <code>basic_iostream</code>），同时支持输入和输出操作。</li><li>为了避免多继承的二义性，从 ios 派生出 istream 和 ostream 时，均使用了 virtual 关键字（虚继承）。</li><li>标准设备流（关联键盘 / 屏幕） <ul><li><strong><code>cin</code></strong>：<code>istream</code> 的实例，关联标准输入设备（键盘），用于从键盘读取数据，也可以被重定向为从文件中读取数据。</li><li><strong><code>cout</code></strong>：<code>ostream</code> 的实例，关联标准输出设备（屏幕），用于向屏幕输出数据，也可以被重定向为向文件写入数据。</li><li><strong><code>cerr</code></strong>：<code>ostream</code> 的实例，关联标准错误输出（屏幕，无缓冲，即时输出），用于向屏幕输出出错信息，不能被重定向。</li><li><strong><code>clog</code></strong>：<code>ostream</code> 的实例，关联标准错误输出（屏幕，有缓冲），用于向屏幕输出日志信息，不能被重定向。</li></ul></li></ul><blockquote><p>[!NOTE] cerr 和 clog的区别在于：cerr 不使用缓冲区，直接向显示器输出信息；而输出到 clog 中的信息会先被存放到缓冲区，缓冲区满或者刷新时才输出到屏幕。</p></blockquote><ul><li><p>本质就是：ostream cout(&amp;fout);</p></li><li><p>ostream 类的无参构造函数和复制构造函数都是私有的，因此在程序中一般无法定义 ostream 类的对象，唯一能用的 ostream 类的对象就是 cout。</p></li><li><p>cout 可以被重定向，而 cerr 不能。所谓重定向，就是将输入的源或输出的目的地改变。例如，cout 本来是输出到屏幕上的，但是经过重定向，本该输出到屏幕上的东西就可以被输出到文件中。</p></li></ul><h3 id="_20-5-fstream类" tabindex="-1"><a class="header-anchor" href="#_20-5-fstream类"><span>20.5 fstream类</span></a></h3><ul><li><p><code>ifstream</code>/<code>ofstream</code>/<code>fstream</code>：文件流类，用于操作磁盘文件（继承自输入 / 输出 / 双向流类）。</p></li><li><p>fstream作用：同时支持对文件的<strong>读操作</strong>和<strong>写操作</strong>（继承自 <code>iostream</code>，因此同时拥有 <code>istream</code> 和 <code>ostream</code> 的功能）。</p></li><li><p>使用步骤：</p><ol><li>创建 <code>fstream</code> 对象，关联文件（通过构造函数或 <code>open()</code> 方法）。</li><li>使用 <code>&gt;&gt;</code> 或 <code>read()</code> 读文件，使用 <code>&lt;&lt;</code> 或 <code>write()</code> 写文件。</li><li>操作完成后关闭文件（<code>close()</code> 方法，对象销毁时也会自动关闭）。</li></ol></li><li><p>文件流（关联磁盘文件）</p><ul><li><strong><code>ifstream</code></strong>：继承自 <code>istream</code>，用于<strong>从文件读取数据</strong>（模板类为 <code>basic_ifstream</code>）。</li><li><strong><code>ofstream</code></strong>：继承自 <code>ostream</code>，用于<strong>向文件写入数据</strong>（模板类为 <code>basic_ofstream</code>）。</li><li><strong><code>fstream</code></strong>：继承自 <code>iostream</code>，用于<strong>文件的双向读写</strong>（模板类为 <code>basic_fstream</code>）。</li></ul></li><li><p><code>istringstream</code>/<code>ostringstream</code>/<code>stringstream</code>：字符串流类，用于操作内存中的字符串（类似文件操作，但数据在内存中）。</p></li></ul><h3 id="_20-6-sstream类" tabindex="-1"><a class="header-anchor" href="#_20-6-sstream类"><span>20.6 sstream类</span></a></h3><ul><li><p><strong>stringstream</strong> 是 <strong>C++</strong>  提供的专门用于处理字符串的 <strong>输入输出</strong> 流类。</p></li><li><p>类模板 <code>std::basic_stringstream</code> 实现基于字符串的流上的输入与输出操作。它等效地存储一个  <code>std::basic_string</code> 的实例，并在其上进行输入与输出操作。（typedef basic_stringstream&lt;char&gt; stringstream;）</p></li><li><p>构造</p></li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token comment">// 创建一个 string类对象s和创建一个 stringstraeam类 对象 ss</span></span>
<span class="line">string <span class="token function">s</span><span class="token punctuation">(</span><span class="token string">&quot;hello stringstream&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">stringstream ss<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// 向对象输入字符串 : &quot;&lt;&lt;&quot; 表示向一个对象中输入</span></span>
<span class="line">ss <span class="token operator">&lt;&lt;</span> s<span class="token punctuation">;</span></span>
<span class="line">cout <span class="token operator">&lt;&lt;</span> ss<span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//构造并初始化</span></span>
<span class="line">stringstream <span class="token function">ss</span><span class="token punctuation">(</span><span class="token string">&quot;hello stringstream&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>两种构造有些区域：</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token comment">//构造空</span></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    stringstream ss1<span class="token punctuation">;</span></span>
<span class="line">    ss1 <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;fre&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    ss1 <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;gre&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> ss1<span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment">//输出：fregre</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>[!NOTE] 两个字符串直接拼接在了一起</p></blockquote><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token comment">//构造并初始化</span></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    string <span class="token function">str</span><span class="token punctuation">(</span><span class="token string">&quot;asd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    stringstream <span class="token function">ss2</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> ss2<span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment">//输出：asd</span></span>
<span class="line">    </span>
<span class="line">    ss2 <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;r&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> ss2<span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment">//输出：rsd</span></span>
<span class="line"> </span>
<span class="line">    ss2 <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;13&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> ss2<span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment">//输出：r13</span></span>
<span class="line"> </span>
<span class="line">    ss2 <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;hy&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> ss2<span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment">//输出：r13hy</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>[!NOTE] 在进行字符串拼接时，首先把原本的字符串覆盖掉，之后再进行拼接。</p></blockquote><p>如果想要追加构造，需要显示指定ios_base的添加方式</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    ostringstream <span class="token function">ss</span><span class="token punctuation">(</span><span class="token string">&quot;1 2 3 4 &quot;</span><span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>ios_base<span class="token double-colon punctuation">::</span>ate<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// append 方式追加</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> ss<span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment">//输出：1 2 3 4</span></span>
<span class="line"> </span>
<span class="line">    ss <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;5 3 4&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> ss<span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment">//输出：1 2 3 4 5 3 4</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>输出</li></ul><blockquote><p>[!NOTE] <code>stringstream</code>  可以将存储于内部的字符串输出，需要调用 <code>str()</code> 函数，不可直接输出</p></blockquote><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line">std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> ss<span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// std::cout &lt;&lt; ss &lt;&lt; std::endl; 		// 错误不可直接输出</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>修改</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    stringstream <span class="token function">ss</span><span class="token punctuation">(</span><span class="token string">&quot;hello string&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> ss<span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment">//输出：hello string</span></span>
<span class="line"> </span>
<span class="line">    <span class="token comment">// 修改内容</span></span>
<span class="line">    ss<span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token string">&quot;hello stringstream&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> ss<span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment">//输出：hello stringstream</span></span>
<span class="line"> </span>
<span class="line">    <span class="token comment">// 清空内容</span></span>
<span class="line">    ss<span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> ss<span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment">//输出：</span></span>
<span class="line"> </span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>stringstream</code> 默认是以空格来分割字符串的，利用 <code>stringstream</code> 去除字符串空格非常方便</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    stringstream <span class="token function">ss</span><span class="token punctuation">(</span><span class="token string">&quot;hello string and stringstream&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> ss<span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment">//输出：hello string and stringstream</span></span>
<span class="line">    </span>
<span class="line">	cout<span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    string str<span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">// 注意： stringstream 是一个单词一个单词 “流入”string 的</span></span>
<span class="line">    <span class="token keyword">while</span> <span class="token punctuation">(</span>ss <span class="token operator">&gt;&gt;</span> str<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        cout <span class="token operator">&lt;&lt;</span> str <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment">//输出：hello；输出：string；输出：and；输出：stringstream</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    string str <span class="token operator">=</span> <span class="token string">&quot;10 20.5 hello 30&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    istringstream <span class="token function">iss</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 创建iss对象，关联字符串str</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// 从iss中提取数据（类似cin）</span></span>
<span class="line">    <span class="token keyword">int</span> a<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">double</span> b<span class="token punctuation">;</span></span>
<span class="line">    string c<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">int</span> d<span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    iss <span class="token operator">&gt;&gt;</span> a <span class="token operator">&gt;&gt;</span> b <span class="token operator">&gt;&gt;</span> c <span class="token operator">&gt;&gt;</span> d<span class="token punctuation">;</span>  <span class="token comment">// 按空格或者\\t或者\\n分割提取，读取时会自动跳过开头的空白字符（如果有的话）。</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// 输出提取结果</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;a: &quot;</span> <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>    <span class="token comment">// 10</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;b: &quot;</span> <span class="token operator">&lt;&lt;</span> b <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>    <span class="token comment">// 20.5</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;c: &quot;</span> <span class="token operator">&lt;&lt;</span> c <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>    <span class="token comment">// hello</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;d: &quot;</span> <span class="token operator">&lt;&lt;</span> d <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>    <span class="token comment">// 30</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//也可以自己指定分隔符</span></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">	string source <span class="token operator">=</span> <span class="token string">&quot;abc,123,&lt;!&gt;&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    stringstream <span class="token function">ss</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> ss<span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment">//输出：abc,123,&lt;!&gt;</span></span>
<span class="line">    </span>
<span class="line">	cout<span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></span>
<span class="line"> </span>
<span class="line">    string str<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">getline</span><span class="token punctuation">(</span>ss<span class="token punctuation">,</span> str<span class="token punctuation">,</span> <span class="token char">&#39;,&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        cout <span class="token operator">&lt;&lt;</span> str <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment">//输出：abc；输出：123；输出：&lt;!&gt;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"> </span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>使用 <code>stringstream</code> 进行类型转换</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token comment">//将数字转换为字符串</span></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span></span>
<span class="line">    std<span class="token double-colon punctuation">::</span>stringstream ss<span class="token punctuation">;</span></span>
<span class="line">    ss <span class="token operator">&lt;&lt;</span> num<span class="token punctuation">;</span> <span class="token comment">// 将整数放入流中</span></span>
<span class="line">    std<span class="token double-colon punctuation">::</span>string str <span class="token operator">=</span> ss<span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 使用str()函数 从流中提取字符串</span></span>
<span class="line">    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> str <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span> <span class="token comment">// 输出：123</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">//将字符串转换为数值</span></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    std<span class="token double-colon punctuation">::</span>string str <span class="token operator">=</span> <span class="token string">&quot;456&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    std<span class="token double-colon punctuation">::</span>stringstream <span class="token function">ss</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 初始化stringstream</span></span>
<span class="line">    <span class="token keyword">int</span> num<span class="token punctuation">;</span></span>
<span class="line">    ss <span class="token operator">&gt;&gt;</span> num<span class="token punctuation">;</span> <span class="token comment">// 从流中提取整数</span></span>
<span class="line">    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> num <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span> <span class="token comment">// 输出：456</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_20-7-流控制" tabindex="-1"><a class="header-anchor" href="#_20-7-流控制"><span>20.7 流控制</span></a></h3><ul><li>控制方法 <ol><li><strong>流成员函数</strong>：如<code>setf()</code>（设置格式标志）、<code>precision()</code>（设置精度）、<code>width()</code>（设置宽度）。</li><li><strong>操纵符（Manipulators）</strong>：需包含<code>&lt;iomanip&gt;</code>头文件，如<code>setw()</code>、<code>setfill()</code>、<code>setprecision()</code>、<code>hex</code>等，使用更简洁。</li></ol></li><li>所有流类（<code>cin</code>、<code>cout</code>、<code>iss</code>、<code>oss</code>、<code>fstream</code>等）都继承了<code>ios_base</code>的格式控制功能，因此上述方法适用于： <ol><li>标准流：<code>cin</code>、<code>cout</code>、<code>cerr</code>。</li><li>字符串流：<code>istringstream</code>、<code>ostringstream</code>、<code>stringstream</code>。</li><li>文件流：<code>ifstream</code>、<code>ofstream</code>、<code>fstream</code>。</li></ol></li></ul><h4 id="_20-7-1-固定宽度与填充字符" tabindex="-1"><a class="header-anchor" href="#_20-7-1-固定宽度与填充字符"><span>20.7.1 固定宽度与填充字符</span></a></h4><ul><li><strong>需求</strong>：输出时固定宽度，不足部分用指定字符（如空格、0）填充。</li><li><strong>方法</strong>：<code>setw(n)</code>（设置宽度）+ <code>setfill(c)</code>（设置填充字符）。</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iomanip&gt;</span>  <span class="token comment">// 需包含此头文件</span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sstream&gt;</span></span></span>
<span class="line"><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 1. 标准输出cout</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;默认：&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">123</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  <span class="token comment">// 输出：123</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;固定宽度5，填充0：&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token function">setfill</span><span class="token punctuation">(</span><span class="token char">&#39;0&#39;</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">123</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  <span class="token comment">// 00123</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;固定宽度5，填充*：&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token function">setfill</span><span class="token punctuation">(</span><span class="token char">&#39;*&#39;</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">123</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  <span class="token comment">// **123</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 2. 字符串流oss</span></span>
<span class="line">    ostringstream oss<span class="token punctuation">;</span></span>
<span class="line">    oss <span class="token operator">&lt;&lt;</span> <span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token function">setfill</span><span class="token punctuation">(</span><span class="token char">&#39;0&#39;</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">45</span><span class="token punctuation">;</span>  <span class="token comment">// 宽度6，填充0</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;oss结果：&quot;</span> <span class="token operator">&lt;&lt;</span> oss<span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  <span class="token comment">// 000045</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>[!NOTE] 注意：<code>setw(n)</code>仅对<strong>下一次输出有效</strong>，之后需重新设置；<code>setfill(c)</code>则持续有效，直到被修改。</p><blockquote><p><code>setfill</code> 仅用于<strong>补充 “指定宽度与实际内容宽度的差值”</strong>。如果没有用 <code>setw(n)</code> 指定宽度，流会直接输出内容，无需填充，因此 <code>setfill</code> 的设置不会产生任何效果。默认情况下，<code>setfill</code> 的填充字符是<strong>空格（<code>&#39; &#39;</code>）</strong>。这是 C++ 流类的初始设置，无需手动配置。</p></blockquote></blockquote><h4 id="_20-7-2-数值补零" tabindex="-1"><a class="header-anchor" href="#_20-7-2-数值补零"><span>20.7.2 数值补零</span></a></h4><ul><li><strong>整数补零</strong>：结合<code>setw()</code>和<code>setfill(&#39;0&#39;)</code>（见上面示例）。</li><li><strong>浮点数补零</strong>：配合<code>fixed</code>（固定小数位）和<code>setprecision(n)</code>（保留 n 位小数）。</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iomanip&gt;</span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sstream&gt;</span></span></span>
<span class="line"><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">double</span> num <span class="token operator">=</span> <span class="token number">3.14</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 1. cout控制浮点数补零</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;默认：&quot;</span> <span class="token operator">&lt;&lt;</span> num <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  <span class="token comment">// 3.14</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;保留4位小数，补零：&quot;</span> <span class="token operator">&lt;&lt;</span> fixed <span class="token operator">&lt;&lt;</span> <span class="token function">setprecision</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> num <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  <span class="token comment">// 3.1400</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 2. oss控制整数补零</span></span>
<span class="line">    ostringstream oss<span class="token punctuation">;</span></span>
<span class="line">    oss <span class="token operator">&lt;&lt;</span> <span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token function">setfill</span><span class="token punctuation">(</span><span class="token char">&#39;0&#39;</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">7</span><span class="token punctuation">;</span>  <span class="token comment">// 宽度5，填充0</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;整数补零：&quot;</span> <span class="token operator">&lt;&lt;</span> oss<span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  <span class="token comment">// 00007</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_20-7-3-对齐方式" tabindex="-1"><a class="header-anchor" href="#_20-7-3-对齐方式"><span>20.7.3 对齐方式</span></a></h4><ul><li><strong>需求</strong>：输出内容在指定宽度内左对齐或右对齐。</li><li><strong>方法</strong>：<code>left</code>（左对齐）、<code>right</code>（右对齐，默认）操纵符，配合<code>setw()</code>。</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iomanip&gt;</span></span></span>
<span class="line"><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;右对齐（默认）：&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token function">setfill</span><span class="token punctuation">(</span><span class="token char">&#39;-&#39;</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;hello&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  <span class="token comment">// -----hello</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;左对齐：&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> left <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;hello&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  <span class="token comment">// hello-----</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_20-7-4-数值进制转换" tabindex="-1"><a class="header-anchor" href="#_20-7-4-数值进制转换"><span>20.7.4 数值进制转换</span></a></h4><ul><li><strong>需求</strong>：以不同进制输出整数（如十六进制、八进制）。</li><li><strong>方法</strong>：<code>dec</code>（十进制，默认）、<code>hex</code>（十六进制）、<code>oct</code>（八进制）。</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sstream&gt;</span></span></span>
<span class="line"><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 1. cout输出不同进制</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;十进制：&quot;</span> <span class="token operator">&lt;&lt;</span> dec <span class="token operator">&lt;&lt;</span> num <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  <span class="token comment">// 255</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;十六进制：&quot;</span> <span class="token operator">&lt;&lt;</span> hex <span class="token operator">&lt;&lt;</span> num <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  <span class="token comment">// ff（小写）</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;十六进制大写：&quot;</span> <span class="token operator">&lt;&lt;</span> uppercase <span class="token operator">&lt;&lt;</span> hex <span class="token operator">&lt;&lt;</span> num <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  <span class="token comment">// FF</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 2. oss输出十六进制</span></span>
<span class="line">    ostringstream oss<span class="token punctuation">;</span></span>
<span class="line">    oss <span class="token operator">&lt;&lt;</span> hex <span class="token operator">&lt;&lt;</span> num<span class="token punctuation">;</span>  <span class="token comment">// 以十六进制写入字符串流</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;oss十六进制结果：&quot;</span> <span class="token operator">&lt;&lt;</span> oss<span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  <span class="token comment">// ff</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_20-7-5-输入格式控制" tabindex="-1"><a class="header-anchor" href="#_20-7-5-输入格式控制"><span>20.7.5 输入格式控制</span></a></h4><p><code>cin</code>和<code>iss</code>也可通过格式控制调整输入解析方式，例如按特定进制读取整数：</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sstream&gt;</span></span></span>
<span class="line"><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 1. cin按十六进制读取</span></span>
<span class="line">    <span class="token keyword">int</span> x<span class="token punctuation">;</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;输入十六进制数（如ff）：&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    cin <span class="token operator">&gt;&gt;</span> hex <span class="token operator">&gt;&gt;</span> x<span class="token punctuation">;</span>  <span class="token comment">// 读取十六进制&quot;ff&quot;，转换为整数255</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;十进制值：&quot;</span> <span class="token operator">&lt;&lt;</span> dec <span class="token operator">&lt;&lt;</span> x <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  <span class="token comment">// 255</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 2. iss按八进制读取</span></span>
<span class="line">    string data <span class="token operator">=</span> <span class="token string">&quot;17&quot;</span><span class="token punctuation">;</span>  <span class="token comment">// 八进制17 = 十进制15</span></span>
<span class="line">    istringstream <span class="token function">iss</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">int</span> y<span class="token punctuation">;</span></span>
<span class="line">    iss <span class="token operator">&gt;&gt;</span> oct <span class="token operator">&gt;&gt;</span> y<span class="token punctuation">;</span>  <span class="token comment">// 按八进制解析</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;十进制值：&quot;</span> <span class="token operator">&lt;&lt;</span> y <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  <span class="token comment">// 15</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_21-左值-右值" tabindex="-1"><a class="header-anchor" href="#_21-左值-右值"><span>21. 左值/右值</span></a></h2><h3 id="_21-1-左值" tabindex="-1"><a class="header-anchor" href="#_21-1-左值"><span>21.1 左值</span></a></h3><ul><li>左值是一个表示数据的表达式(如变量名或解引用的指针)，我们可以获取它的地址并且可以对它赋值(const修饰符后的左值，不能给他赋值，但是可以取它的地址)，左值可以出现赋值符号的左边，右值不能出现在赋值符号左边。</li><li>我们可以修改左值，但不可以修改右值。</li><li>左值引用就是给左值的引用，给左值取别名。</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token comment">//如下c,b,p都为左值。</span></span>
<span class="line"><span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">int</span><span class="token operator">*</span> p <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_21-2-右值" tabindex="-1"><a class="header-anchor" href="#_21-2-右值"><span>21.2 右值</span></a></h3><ul><li>右值也是一个表示数据的表达式，如：字面常量、表达式返回值，函数返回值等等。</li><li>右值可以出现在赋值符号的右边，但是不能出现出现在赋值符号的左边，右值不能取地址，我们也不能修改右值。</li><li>右值引用就是对右值的引用，给右值取别名</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">int</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line"><span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line"><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//右值</span></span>
<span class="line"><span class="token number">10</span><span class="token punctuation">;</span></span>
<span class="line">a <span class="token operator">+</span> b<span class="token punctuation">;</span></span>
<span class="line"><span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_21-3-左值与右值对比" tabindex="-1"><a class="header-anchor" href="#_21-3-左值与右值对比"><span>21.3 左值与右值对比</span></a></h3><ul><li><p>左值一般为我们自己定义的变量，在定义时开辟了内存，我们可以对这块内存赋值，修改内存中的值，如果有const也仅从语法层面上不允许修改，这块内存在其生命周期结束的时候销毁。</p></li><li><p>右值一般为临时变量，是程序运行时产生的中间产物，他不是我们用户自己定义开辟空间的，是由编译器帮我们开辟空间，并且在用完就立即销毁。右值的生命周期一般只在当前语句，当我们要对右值进行赋值时，他已经释放空间了，此时我们再进行访问就是野访问，（与野指针一样造成内存问题），所以我们不能对右值进行修改，编译器强制语法检查，遇到修改操作就报错。</p></li><li><p>右值中特殊的就是字面常量，他们存储在内存的常量区，内存为只读属性，不可以修改，不可以取地址，他们的生命周期与程序的生命周期一样，当我们使用字面常量时，编译器帮我们开辟空间，并用字面常量初始化，这块临时空间用完即销。</p></li><li><p>C++对于左值和右值没有标准定义，但是有一个被广泛认同的说法：</p><ul><li>可以取地址的，有名字的，非临时的就是左值；</li><li>不能取地址的，没有名字的，临时的就是右值；</li></ul></li><li><p>所以立即数，函数返回的值等都是右值；而非匿名对象(包括变量)，函数返回的引用，const对象等都是左值。</p></li><li><p>分辨左右值最常用方法就是判断他是否可以取地址。如果不可以就为右值。</p></li></ul><h2 id="_22-左值-右值引用" tabindex="-1"><a class="header-anchor" href="#_22-左值-右值引用"><span>22. 左值/右值引用</span></a></h2><h3 id="_22-1-左值引用【避免对象拷贝】" tabindex="-1"><a class="header-anchor" href="#_22-1-左值引用【避免对象拷贝】"><span>22.1 左值引用【避免对象拷贝】</span></a></h3><ul><li>左值引用就是给左值的引用，主要作用是避免对象拷贝。</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">int</span><span class="token operator">*</span> p <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span></span>
<span class="line"> </span>
<span class="line"><span class="token comment">//左值引用</span></span>
<span class="line"><span class="token keyword">int</span><span class="token operator">&amp;</span> lc <span class="token operator">=</span> c<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;</span> lb <span class="token operator">=</span> b<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">int</span><span class="token operator">*</span><span class="token operator">&amp;</span> lp <span class="token operator">=</span> p<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>在int&amp; lc = c;语句后，lc与c使用的是同一块空间，lc与c完全等效，一荣俱荣，一损俱损。</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">int</span> <span class="token operator">&amp;</span>b <span class="token operator">=</span> a<span class="token punctuation">;</span>  <span class="token comment">// 定义一个左值引用变量</span></span>
<span class="line">b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>      <span class="token comment">// 通过左值引用修改引用内存的值</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>左值引用在汇编层面其实和普通的指针是一样的；定义引用变量必须初始化，因为引用其实就是一个别名，需要告诉编译器定义的是谁的引用。</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">int &amp;var = 10;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>上述代码是无法编译通过的，因为10无法进行取地址操作，无法对一个立即数取地址，因为立即数并没有在内存中存储，而是存储在寄存器中，可以通过下述方法解决：</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">const int &amp;var = 10;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>使用常引用来引用常量数字10，因为此刻内存上产生了临时变量保存了10，这个临时变量是可以进行取地址操作的，因此var引用的其实是这个临时变量，相当于下面的操作：</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">const int temp = 10; </span>
<span class="line">const int &amp;var = temp;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>总结来说 <ul><li>左值引用要求右边的值必须能够取地址，如果无法取地址，可以用常引用；</li><li>但使用常引用后，我们只能通过引用来读取数据，无法去修改数据，因为其被const修饰成常量引用了。</li></ul></li></ul><h3 id="_22-2-右值引用【延长对象生命周期】" tabindex="-1"><a class="header-anchor" href="#_22-2-右值引用【延长对象生命周期】"><span>22.2 右值引用【延长对象生命周期】</span></a></h3><ul><li>右值引用就是对右值的引用，给右值取别名。主要作用是把延长对象的生命周期，一般是延长到作用域的scope之外。</li><li>定义右值引用的格式为：<code>类型 &amp;&amp; 引用名 = 右值表达式</code>,例如<code>int &amp;&amp;var = 10;</code></li><li>右值引用是C++ 11新增的特性，所以C++ 98的引用为左值引用。右值引用用来绑定到右值，绑定到右值以后本来会被销毁的右值的生存期会延长至与绑定到它的右值引用的生存期。在汇编层面右值引用做的事情和常引用是相同的，即产生临时量来存储常量。但是，唯一 一点的区别是，右值引用可以进行读写操作，而常引用只能进行读操作。右值引用的存在并不是为了取代左值引用，而是充分利用右值(特别是临时对象)的构造来减少对象构造和析构操作以达到提高效率的目的。</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">int</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line"><span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line"><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line"> </span>
<span class="line"><span class="token comment">//右值引用</span></span>
<span class="line"><span class="token keyword">int</span> <span class="token operator">&amp;&amp;</span> r1<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">int</span> <span class="token operator">&amp;&amp;</span> r2<span class="token operator">=</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">int</span> <span class="token operator">&amp;&amp;</span> r3<span class="token operator">=</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>右值引用就是对右值的引用，给右值取别名。他的语法与左值引用十分相似，右值引用语法为对应类型加上两个&amp; 。</li></ul><p>注意：</p><ul><li>右值引用 引用 右值，会使右值被存储到特定的位置。右值引用变量其实是左值，可以对它取地址和赋值（const右值引用变量可以取地址但不可以赋值，因为 const 在起作用）。</li><li>当然，取地址是指取变量空间的地址（右值是不能取地址的）。</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">double</span><span class="token operator">&amp;&amp;</span> rr2 <span class="token operator">=</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">&amp;</span>rr2<span class="token punctuation">;</span></span>
<span class="line">rr2 <span class="token operator">=</span> <span class="token number">9.4</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//右值引用 rr2 引用右值 x + y 后，该表达式的返回值被存储到特定的位置，不能取表达式返回值 x + y 的地址，但是可以取 rr2 的地址，也可以修改 rr2 。</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token keyword">double</span><span class="token operator">&amp;&amp;</span> rr4 <span class="token operator">=</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">&amp;</span>rr4<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//可以对 rr4 取地址，但不能修改 rr4，即写成rr4 = 5.3;会编译报错</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>主要是解决函数参数的传递中（针对返回的将亡值，即局部大块数据），解决大块数据或对象的传递效率和空间不如意的问题</li></ul><h3 id="_22-3-左值引用与右值引用对比" tabindex="-1"><a class="header-anchor" href="#_22-3-左值引用与右值引用对比"><span>22.3 左值引用与右值引用对比</span></a></h3><ul><li><p>首先明确一点就是不管是左值引用还是右值引用，都是给一段空间取别名。对于左值引用而言，他与绑定的变量共用同一块空间，是之前我们定义该变量（左值）开辟的空间，没有再开辟出新内存。</p></li><li><p>对于右值引用而言，他也没有开辟内存，他绑定的一块空间是编译器运行时为右值自动开辟的空间，没有为右值引用再开辟出新内存。</p></li><li><p>如果按照编译器对于普通右值的处理，当前语句结束就销毁，右值引用语法规定可以获取临时变量的内存空间权力，（以该句为例int &amp;&amp; r3=fun();）当我们用r3引用fun（）这个右值的时候，这块空间原本是由编译器释放销毁的，但被人为的抢走释放权限，加上右值引用这句话，就相当于说明我认为这块空间还有利用的价值，你编译器先别着急释放，交给我来释放，这里水很深，交给我来把握。我们就拥有了这块空间的生杀大权，编译器就不会立即释放该内存。</p></li><li><p>左值引用与右值引用相同之处</p><ol><li>都是引用，都是再给一段空间取别名</li><li>除了const修饰外，左值引用与右值引用都可以修改。</li><li>底层都是指针，语法层面不同罢了</li></ol></li><li><p>左值引用与右值引用不同之处</p><ol><li>左值引用引用左值，左值可以修改；右值引用引用右值，右值不可以修改</li><li>左值是由用户自定义变量组成，右值一般为编译器运行时开辟临时变量。</li></ol></li></ul><h3 id="_22-4-左值引用与右值引用总结" tabindex="-1"><a class="header-anchor" href="#_22-4-左值引用与右值引用总结"><span>22.4 左值引用与右值引用总结</span></a></h3><ul><li><p>左值引用可以指向右值，但需要const来修饰，不能修改这个值</p></li><li><p>右值引用可以指向左值，需要std::move(v)即可</p></li><li><p>声明出来的左值引用或右值引用都是左值</p></li><li><p>左值引用只能引用左值，不能直接引用右值。</p></li><li><p>但是const左值引用既可以引用左值，也可以引用右值。</p></li><li><p>右值引用只能引用右值，不能直接引用左值。</p></li><li><p>但是右值引用可以引用被move的左值。</p></li></ul><blockquote><p>[!NOTE] std::move（C++11中将参数类型强制转换为右值，不管参数是左值还是右值。），作用是将一个值强制转化为右值，以实现移动语义。左值被 move 后变为右值，于是右值引用可以引用。</p></blockquote><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token comment">// 1.左值引用只能引用左值</span></span>
<span class="line"><span class="token keyword">int</span> t <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">int</span><span class="token operator">&amp;</span> rt1 <span class="token operator">=</span> t<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//int&amp; rt2 = 8; // 编译报错，因为8是右值，不能直接引用右值</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 2.但是const左值引用既可以引用左值</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;</span> rt3 <span class="token operator">=</span> t<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;</span> rt4 <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token comment">// 也可以引用右值 const int&amp; rt4本质上也是一个常量，指向一个不能被修改的右值，也是安全的</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token keyword">double</span><span class="token operator">&amp;</span> r1 <span class="token operator">=</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token keyword">double</span><span class="token operator">&amp;</span> r2 <span class="token operator">=</span> <span class="token function">fmin</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 3.右值引用只能引用右值</span></span>
<span class="line"><span class="token keyword">int</span><span class="token operator">&amp;&amp;</span> rr1 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">double</span><span class="token operator">&amp;&amp;</span> rr2 <span class="token operator">=</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token keyword">double</span><span class="token operator">&amp;&amp;</span> rr3 <span class="token operator">=</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">int</span> t <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//int&amp;&amp; rrt = t; // 编译报错，不能直接引用左值</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 4.但是右值引用可以引用被move的左值</span></span>
<span class="line"><span class="token keyword">int</span><span class="token operator">&amp;&amp;</span> rrt <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">move</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">int</span><span class="token operator">*</span><span class="token operator">&amp;&amp;</span> rr4 <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">move</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">int</span><span class="token operator">&amp;&amp;</span> rr5 <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;&amp;</span> rr6 <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">move</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_22-5-修改-取地址" tabindex="-1"><a class="header-anchor" href="#_22-5-修改-取地址"><span>22.5 修改/取地址</span></a></h3><ul><li>右值是一定不可以修改和取地址的，右值引用是可以修改的，也可以取地址。</li><li>左值引用和左值一样，左值引用可以修改和取地址。</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line"> </span>
<span class="line"><span class="token comment">//右值引用</span></span>
<span class="line"><span class="token keyword">int</span><span class="token operator">&amp;&amp;</span> r1 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token comment">//当执行完int&amp;&amp; r1 = 10;语句后他就与int c = 10;int&amp; r1 = c;这两句的效果一样</span></span>
<span class="line"></span>
<span class="line">cout <span class="token operator">&lt;&lt;</span> r1 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></span>
<span class="line">cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> r1 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></span>
<span class="line">r1 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span></span>
<span class="line">cout <span class="token operator">&lt;&lt;</span> r1 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></span>
<span class="line"> </span>
<span class="line"><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>右值不可以修改，退一步来说取地址实际上也是为了后面修改操作。右值在当前语句结束就销毁，后面语句再访问/修改就是访问野空间，会报错。</li><li>右值引用可以修改，我们从编译器手中拿走了右值销毁的权利，“右值”在引用后依旧存在，可以进行正常的访问修改操作。</li><li>左值引用和左值使用的都是用户自定义开辟的空间，所以左值引用支持修改。</li></ul><h3 id="_22-6-左值引用-引用-右值" tabindex="-1"><a class="header-anchor" href="#_22-6-左值引用-引用-右值"><span>22.6 左值引用 引用 右值</span></a></h3><ul><li>首先<code>int&amp;&amp; ra = 10;</code>是正常的定义右值引用，是没有任何问题的</li><li><code>int&amp; la = 10;</code>直接使用左值是错误的，编译器报错。编译器检测右值不支持修改操作，但一般的左值引用支持修改，我们就可以加上const，禁止修改，使得编译器检测通过：<code>int&amp; la = 10;</code></li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">int</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line"><span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line"><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line"> </span>
<span class="line"><span class="token comment">//左值引用</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;</span> r1 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;</span> r2 <span class="token operator">=</span> <span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;</span> r3 <span class="token operator">=</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_22-7-右值引用-引用-左值" tabindex="-1"><a class="header-anchor" href="#_22-7-右值引用-引用-左值"><span>22.7 右值引用 引用 左值</span></a></h3><ul><li><code>int c = 0;int&amp; lc = c;</code>是正常的定义左值引用，是没有任何问题的</li><li><code>int &amp;&amp;rc=c</code>直接写不行，得强制转换：<code>int &amp;&amp;rc=(int &amp;&amp;)c</code></li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">int</span><span class="token operator">*</span> p <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span></span>
<span class="line"> </span>
<span class="line"><span class="token comment">//右值引用</span></span>
<span class="line"><span class="token keyword">int</span><span class="token operator">&amp;&amp;</span> lc <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">)</span>c<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;&amp;</span> lb <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">)</span>b<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">int</span><span class="token operator">*</span><span class="token operator">&amp;&amp;</span> lp <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">)</span>p<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>右值引用后，lc与c用的是同一块空间，此时仿佛lc是左值引用一样。我们可以通过如下代码检测。</li></ul><h3 id="_22-8-左值引用用处" tabindex="-1"><a class="header-anchor" href="#_22-8-左值引用用处"><span>22.8 左值引用用处</span></a></h3><p>引用有和指针同等的效率，那么在函数设计传递参数的时候，我们就可以传递引用来代替指针，</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">void</span> <span class="token function">Print1</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token operator">&amp;</span> t<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">Print2</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">*</span> pt<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">t1</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">//引用比指针更加的安全。如果在 Print2中修改pt的值，就会造成野指针问题，</span></span>
<span class="line"><span class="token function">Print1</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">Print2</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>t1<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_22-9-右值引用用处" tabindex="-1"><a class="header-anchor" href="#_22-9-右值引用用处"><span>22.9 右值引用用处</span></a></h3><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token comment">//用C++实现一个简单的顺序栈：</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Stack</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line"><span class="token keyword">public</span><span class="token operator">:</span></span>
<span class="line">    <span class="token comment">// 构造</span></span>
<span class="line">    <span class="token function">Stack</span><span class="token punctuation">(</span><span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">)</span> </span>
<span class="line"><span class="token operator">:</span><span class="token function">msize</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">mtop</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Stack(int)&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></span>
<span class="line">mpstack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>size<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 析构</span></span>
<span class="line">    <span class="token operator">~</span><span class="token function">Stack</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;~Stack()&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span>mpstack<span class="token punctuation">;</span></span>
<span class="line">mpstack <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 拷贝构造</span></span>
<span class="line">    <span class="token function">Stack</span><span class="token punctuation">(</span><span class="token keyword">const</span> Stack <span class="token operator">&amp;</span>src<span class="token punctuation">)</span></span>
<span class="line"><span class="token operator">:</span><span class="token function">msize</span><span class="token punctuation">(</span>src<span class="token punctuation">.</span>msize<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">mtop</span><span class="token punctuation">(</span>src<span class="token punctuation">.</span>mtop<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Stack(const Stack&amp;)&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></span>
<span class="line">mpstack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>src<span class="token punctuation">.</span>msize<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> mtop<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    mpstack<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> src<span class="token punctuation">.</span>mpstack<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 赋值重载</span></span>
<span class="line">    Stack<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Stack <span class="token operator">&amp;</span>src<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;operator=&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> <span class="token operator">&amp;</span>src<span class="token punctuation">)</span></span>
<span class="line">         <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span>mpstack<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">msize <span class="token operator">=</span> src<span class="token punctuation">.</span>msize<span class="token punctuation">;</span></span>
<span class="line">mtop <span class="token operator">=</span> src<span class="token punctuation">.</span>mtop<span class="token punctuation">;</span></span>
<span class="line">mpstack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>src<span class="token punctuation">.</span>msize<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> mtop<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    mpstack<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> src<span class="token punctuation">.</span>mpstack<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">int</span> <span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> </span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line"><span class="token keyword">return</span> msize<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">private</span><span class="token operator">:</span></span>
<span class="line">    <span class="token keyword">int</span> <span class="token operator">*</span>mpstack<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">int</span> mtop<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">int</span> msize<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">Stack <span class="token function">GetStack</span><span class="token punctuation">(</span>Stack <span class="token operator">&amp;</span>stack<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    Stack <span class="token function">tmp</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">return</span> tmp<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    Stack s<span class="token punctuation">;</span></span>
<span class="line">    s <span class="token operator">=</span> <span class="token function">GetStack</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//运行结果如下：</span></span>
<span class="line"></span>
<span class="line"><span class="token function">Stack</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>             <span class="token comment">// 构造s</span></span>
<span class="line"><span class="token function">Stack</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>             <span class="token comment">// 构造tmp</span></span>
<span class="line"><span class="token function">Stack</span><span class="token punctuation">(</span><span class="token keyword">const</span> Stack<span class="token operator">&amp;</span><span class="token punctuation">)</span>    <span class="token comment">// tmp拷贝构造main函数栈帧上的临时对象</span></span>
<span class="line"><span class="token operator">~</span><span class="token function">Stack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>               <span class="token comment">// tmp析构</span></span>
<span class="line"><span class="token keyword">operator</span><span class="token operator">=</span>              <span class="token comment">// 临时对象赋值给s</span></span>
<span class="line"><span class="token operator">~</span><span class="token function">Stack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>               <span class="token comment">// 临时对象析构</span></span>
<span class="line"><span class="token operator">~</span><span class="token function">Stack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>               <span class="token comment">// s析构</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>为了解决浅拷贝问题，为类提供了自定义的拷贝构造函数和赋值运算符重载函数，并且这两个函数内部实现都是非常的耗费时间和资源(首先开辟较大的空间，然后将数据逐个复制)，我们通过上述运行结果发现了两处使用了拷贝构造和赋值重载，分别是tmp拷贝构造main函数栈帧上的临时对象、临时对象赋值给s，其中tmp和临时对象都在各自的操作结束后便销毁了，使得程序效率非常低下。</p></li><li><p>那么为了提高效率，在C++11中通过提供带右值引用参数的拷贝构造函数和赋值运算符重载函数，可以把tmp持有的内存资源直接给临时对象,可以把临时对象的资源直接给s。</p></li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token comment">// 带右值引用参数的拷贝构造函数</span></span>
<span class="line"><span class="token function">Stack</span><span class="token punctuation">(</span>Stack <span class="token operator">&amp;&amp;</span>src<span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">:</span><span class="token function">msize</span><span class="token punctuation">(</span>src<span class="token punctuation">.</span>msize<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">mtop</span><span class="token punctuation">(</span>src<span class="token punctuation">.</span>mtop<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Stack(Stack&amp;&amp;)&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">/*此处没有重新开辟内存拷贝数据，把src的资源直接给当前对象，再把src置空*/</span></span>
<span class="line">    mpstack <span class="token operator">=</span> src<span class="token punctuation">.</span>mpstack<span class="token punctuation">;</span>  </span>
<span class="line">    src<span class="token punctuation">.</span>mpstack <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 带右值引用参数的赋值运算符重载函数</span></span>
<span class="line">Stack<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span>Stack <span class="token operator">&amp;&amp;</span>src<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;operator=(Stack&amp;&amp;)&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> <span class="token operator">&amp;</span>src<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span>mpstack<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    msize <span class="token operator">=</span> src<span class="token punctuation">.</span>msize<span class="token punctuation">;</span></span>
<span class="line">    mtop <span class="token operator">=</span> src<span class="token punctuation">.</span>mtop<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">/*此处没有重新开辟内存拷贝数据，把src的资源直接给当前对象，再把src置空*/</span></span>
<span class="line">    mpstack <span class="token operator">=</span> src<span class="token punctuation">.</span>mpstack<span class="token punctuation">;</span></span>
<span class="line">    src<span class="token punctuation">.</span>mpstack <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">mpstack <span class="token operator">=</span> src<span class="token punctuation">.</span>mpstack<span class="token punctuation">;</span></span>
<span class="line">运行结果如下：</span>
<span class="line"></span>
<span class="line"><span class="token function">Stack</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>             <span class="token comment">// 构造s</span></span>
<span class="line"><span class="token function">Stack</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>             <span class="token comment">// 构造tmp</span></span>
<span class="line"><span class="token function">Stack</span><span class="token punctuation">(</span>Stack<span class="token operator">&amp;&amp;</span><span class="token punctuation">)</span>         <span class="token comment">// 调用带右值引用的拷贝构造函数，直接将tmp的资源给临时对象</span></span>
<span class="line"><span class="token operator">~</span><span class="token function">Stack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>               <span class="token comment">// tmp析构</span></span>
<span class="line"><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span>Stack<span class="token operator">&amp;&amp;</span><span class="token punctuation">)</span>     <span class="token comment">// 调用带右值引用的赋值运算符重载函数，直接将临时对象资源给s</span></span>
<span class="line"><span class="token operator">~</span><span class="token function">Stack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>               <span class="token comment">// 临时对象析构</span></span>
<span class="line"><span class="token operator">~</span><span class="token function">Stack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>               <span class="token comment">// s析构</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>程序自动调用了带右值引用的拷贝构造函数和赋值运算符重载函数，使得程序的效率得到了很大的提升，因为并没有重新开辟内存拷贝数据。</p></li><li><p>在C++11中规定如果函数返回值是函数体内将要销毁的变量，那么这个将要销毁的变量是右值，叫做将亡值。</p></li><li><p>带右值引用参数的拷贝构造和赋值重载函数，又叫移动构造函数和移动赋值函数，在构造函数中直接掠夺右值引用的资源，我们称这种特殊的构造函数叫做移动构造。=赋值的时候也会出现右值，也可以像重载构造函数一样，重载赋值函数，提高效率。这里的移动指的是把临时量的资源移动给了当前对象，临时对象就不持有资源，为nullptr了，实际上没有进行任何的数据移动，没发生任何的内存开辟和数据拷贝。</p></li></ul><blockquote><p>[!NOTE] 右值引用是基础机制，移动语义依托它实现资源的高效转移，完美转发依托它保持参数的左值 / 右值属性，std::move 则是将左值转为右值引用以触发移动语义的工具。</p></blockquote><blockquote><p>[!NOTE] 有名字的变量，无论其类型是什么引用，作为表达式时都是左值。</p></blockquote><h2 id="_23-移动语义" tabindex="-1"><a class="header-anchor" href="#_23-移动语义"><span>23. 移动语义</span></a></h2><ul><li>将一个对象中的资源移动到另一个对象（资源控制权的转移）。</li></ul><h3 id="_23-1-std-move" tabindex="-1"><a class="header-anchor" href="#_23-1-std-move"><span>23.1 std::move</span></a></h3><ul><li>std::move 是 C++11 引入的一个关键工具，它的核心作用是将左值转换为右值引用，从而允许使用移动语义而非拷贝语义。其主要用途包括： <ul><li>启用移动语义：让编译器知道对象可以被移动而非拷贝</li><li>资源转移：高效转移资源所有权，避免不必要的深拷贝</li><li>性能优化：减少临时对象的构造和析构开销</li></ul></li></ul><h3 id="_23-2-移动构造" tabindex="-1"><a class="header-anchor" href="#_23-2-移动构造"><span>23.2 移动构造</span></a></h3><ul><li>拷贝构造函数和移动构造函数都是构造函数的重载函数，所不同的是： <ul><li>拷贝构造函数的参数是 const左值引用，接收左值或右值；</li><li>移动构造函数的参数是右值引用，接收右值或被 move 的左值。</li></ul></li><li>如果拷贝构造函数和移动构造函数都有在类内定义的话，在构造对象时： <ul><li>若是左值做参数，那么就会调用拷贝构造函数，做一次拷贝（如果是像 string 这样的在堆空间上存在资源的类，那么每调用一次拷贝构造就会做一次深拷贝）。</li><li>若是右值做参数，那么就会调用移动构造，而调用移动构造就会减少拷贝（如果是像 string 这样的在堆空间上存在资源的类，那么每调用一次移动构造就会少做一次深拷贝）。</li></ul></li></ul><h3 id="_23-3-移动赋值" tabindex="-1"><a class="header-anchor" href="#_23-3-移动赋值"><span>23.3 移动赋值</span></a></h3><ul><li>拷贝赋值函数和移动赋值函数都是赋值运算符重载函数的重载函数，所不同的是： <ul><li>拷贝赋值函数的参数是 const左值引用，接收左值或右值；</li><li>移动赋值函数的参数是右值引用，接收右值或被 move 的左值。</li></ul></li><li>如果这两个函数都有在类内定义的话，在进行对象的赋值时： <ul><li>若是左值做参数，那么就会调用拷贝赋值，做一次拷贝（如果是像 string 这样的在堆空间上存在资源的类，那么每调用一次拷贝赋值就会做一次深拷贝）。</li><li>若是右值做参数，那么就会调用移动赋值，而调用移动赋值就会减少拷贝（如果是像 string 这样的在堆空间上存在资源的类，那么每调用一次移动赋值就会少做一次深拷贝）。</li></ul></li></ul><h2 id="_24-万能引用" tabindex="-1"><a class="header-anchor" href="#_24-万能引用"><span>24. 万能引用</span></a></h2><ul><li>万能引用的形式是 T&amp;&amp;，但必须满足两个条件,只有同时满足这两个条件，T&amp;&amp; 才是万能引用，否则就是普通的右值引用（&amp;&amp;）。 <ol><li>它必须是模板参数（即 T 是模板类型参数）；</li><li>必须发生类型推导（编译器需要根据传入的实参推导出 T 的类型）。</li></ol></li><li>万能引用和右值引用区别 <ol><li>万能引用（T&amp;&amp; 带模板推导）：既能接左值，也能接右值；</li><li>右值引用（如 int&amp;&amp;）：只能接右值，不能接左值。</li></ol></li><li>万能引用的类型推导规则：当万能引用绑定到左值或右值时，编译器会推导出不同的 T 类型： <ol><li>若绑定到左值（如 int a; func(a)）：T 会被推导为 “左值引用类型”（如 int&amp;），此时 T&amp;&amp; 会通过 “引用折叠” 变为 int&amp;（左值引用）；</li><li>若绑定到右值（如 func(20)）：T 会被推导为 “非引用类型”（如 int），此时 T&amp;&amp; 就是 int&amp;&amp;（右值引用）。</li></ol></li><li>确定类型的 &amp;&amp; 表示右值引用（比如：int&amp;&amp; ，string&amp;&amp;）</li><li>但函数模板中的 &amp;&amp; 不表示右值引用，而是万能引用，模板类型必须通过推断才能确定，其接收左值后会被推导为左值引用，接收右值后会被推导为右值引用。</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span>T<span class="token operator">&amp;&amp;</span> t<span class="token punctuation">)</span>  <span class="token comment">// 万能引用</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">//...</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>  <span class="token comment">// 左值</span></span>
<span class="line">    <span class="token function">f</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 传参后万能引用被推导为左值引用</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">const</span> string <span class="token function">s</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// const左值</span></span>
<span class="line">    <span class="token function">f</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 传参后万能引用被推导为const左值引用</span></span>
<span class="line">   </span>
<span class="line">    <span class="token function">f</span><span class="token punctuation">(</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token number">1234</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// to_string函数会返回一个string临时对象，是右值，传参后万能引用被推导为右值引用</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">const</span> <span class="token keyword">double</span> d <span class="token operator">=</span> <span class="token number">1.1</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">f</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token function">move</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// const左值被move后变成const右值，传参后万能引用被推导为const右值引用</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+b+`" alt=""></p><ul><li>但是右值引用变量其实是左值</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">Func</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">&amp;</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;左值引用&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">Func</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;const左值引用&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">Func</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">&amp;&amp;</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;右值引用&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">Func</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;&amp;</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;const右值引用&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span>T<span class="token operator">&amp;&amp;</span> t<span class="token punctuation">)</span>  <span class="token comment">// 万能引用</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">Func</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 根据参数t的类型去匹配合适的重载函数</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>  <span class="token comment">// 左值</span></span>
<span class="line">    <span class="token function">f</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">const</span> <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>  <span class="token comment">// const左值</span></span>
<span class="line">    <span class="token function">f</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token function">f</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10是右值</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">const</span> <span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token number">13</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">f</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token function">move</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// const左值被move后变成const右值</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//输出结果</span></span>
<span class="line"><span class="token comment">// 左值引用</span></span>
<span class="line"><span class="token comment">// const左值引用</span></span>
<span class="line"><span class="token comment">// 左值引用</span></span>
<span class="line"><span class="token comment">// const左值引用</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>f(10);10是右值，传参后万能引用被推导为右值引用，但该右值引用变量其实是左值，因此实际调用的函数是void Func(int&amp; x)。</p></li><li><p>f(std::move(c));const左值被move后变成const右值，传参后万能引用被推导为const右值引用，但该const右值引用变量其实是const左值，因此实际调用的函数是void Func(const int&amp; x)。</p></li><li><p>也就是说，右值引用失去了右值的属性。我们期望传递过程中能够保持住它的原有的左值或右值属性，于是 C++11标准提出完美转发。</p></li></ul><h3 id="_24-1-完美转发" tabindex="-1"><a class="header-anchor" href="#_24-1-完美转发"><span>24.1 完美转发</span></a></h3><ul><li><p>完美转发是指在函数模板中，完全依照模板的参数类型，将参数传递给当前函数模板中的另外一个函数。</p></li><li><p>具体来说，为了实现完美转发，除了使用万能引用之外，我们还要用到std::forward（C++11），它在传参的过程中保留对象的原生类型属性。这样右值引用在传递过程中就能够保持右值的属性。</p></li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token comment">//修改f函数为PerfectForward</span></span>
<span class="line"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">PerfectForward</span><span class="token punctuation">(</span>T<span class="token operator">&amp;&amp;</span> t<span class="token punctuation">)</span>  <span class="token comment">// 万能引用</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">Func</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">forward</span><span class="token generic class-name"><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 根据参数t的类型去匹配合适的重载函数</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">//输出结果</span></span>
<span class="line"><span class="token comment">// 左值引用</span></span>
<span class="line"><span class="token comment">// const左值引用</span></span>
<span class="line"><span class="token comment">// 右值引用</span></span>
<span class="line"><span class="token comment">// const右值引用</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>[!NOTE] 只要是右值引用，由当前函数再传递给其它函数调用，要保持右值属性，必须实现完美转发。</p></blockquote><ul><li>右值引用（及其支持的移动语义和完美转发）是 C++11 中加入的最重要的新特性之一，它使得 C++ 程序的运行更加高效。</li><li>完美转发的例子</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">struct</span> <span class="token class-name">ListNode</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    ListNode<span class="token operator">*</span> _next <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span></span>
<span class="line">    ListNode<span class="token operator">*</span> _prev <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span></span>
<span class="line">    T _data<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">List</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">typedef</span> ListNode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Node<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">public</span><span class="token operator">:</span></span>
<span class="line">    <span class="token function">List</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        _head <span class="token operator">=</span> <span class="token keyword">new</span> Node<span class="token punctuation">;</span></span>
<span class="line">        _head<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> _head<span class="token punctuation">;</span></span>
<span class="line">        _head<span class="token operator">-&gt;</span>_prev <span class="token operator">=</span> _head<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">PushBack</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> x<span class="token punctuation">)</span>  <span class="token comment">// 左值引用</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">Insert</span><span class="token punctuation">(</span>_head<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">PushFront</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> x<span class="token punctuation">)</span>  <span class="token comment">// 左值引用</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">Insert</span><span class="token punctuation">(</span>_head<span class="token operator">-&gt;</span>_next<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">PushBack</span><span class="token punctuation">(</span>T<span class="token operator">&amp;&amp;</span> x<span class="token punctuation">)</span>  <span class="token comment">// 右值引用</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">Insert</span><span class="token punctuation">(</span>_head<span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">forward</span><span class="token generic class-name"><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 关键位置：保留对象的原生类型属性</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">PushFront</span><span class="token punctuation">(</span>T<span class="token operator">&amp;&amp;</span> x<span class="token punctuation">)</span>  <span class="token comment">// 右值引用</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">Insert</span><span class="token punctuation">(</span>_head<span class="token operator">-&gt;</span>_next<span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">forward</span><span class="token generic class-name"><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 关键位置：保留对象的原生类型属性</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">TPL</span><span class="token operator">&gt;</span>    <span class="token comment">// 该函数模板实现了完美转发</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">Insert</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> pos<span class="token punctuation">,</span> TPL<span class="token operator">&amp;&amp;</span> x<span class="token punctuation">)</span>  <span class="token comment">// 万能引用</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        Node<span class="token operator">*</span> prev <span class="token operator">=</span> pos<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span></span>
<span class="line">        Node<span class="token operator">*</span> newnode <span class="token operator">=</span> <span class="token keyword">new</span> Node<span class="token punctuation">;</span></span>
<span class="line">        newnode<span class="token operator">-&gt;</span>_data <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">forward</span><span class="token generic class-name"><span class="token operator">&lt;</span>TPL<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 关键位置：保留对象的原生类型属性</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// prev newnode pos</span></span>
<span class="line">        prev<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> newnode<span class="token punctuation">;</span></span>
<span class="line">        newnode<span class="token operator">-&gt;</span>_prev <span class="token operator">=</span> prev<span class="token punctuation">;</span></span>
<span class="line">        newnode<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> pos<span class="token punctuation">;</span></span>
<span class="line">        pos<span class="token operator">-&gt;</span>_prev <span class="token operator">=</span> newnode<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">private</span><span class="token operator">:</span></span>
<span class="line">    Node<span class="token operator">*</span> _head<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_24-2-引用折叠" tabindex="-1"><a class="header-anchor" href="#_24-2-引用折叠"><span>24.2 引用折叠</span></a></h3><ul><li>引用折叠是万能引用能 “同时接收左值和右值” 的核心原因，也广泛用于模板实例化和 auto 推导中。</li></ul><blockquote><p>[!NOTE] 只要其中有一个是左值引用（&amp;），最终结果就是左值引用（&amp;）</p></blockquote><blockquote><p>[!NOTE] 只有两个都是右值引用（&amp;&amp;），最终结果才是右值引用（&amp;&amp;）</p></blockquote><ul><li>引用折叠的 4 条规则</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token comment">//当出现 “引用的引用”（记为 A&amp; &amp;、A&amp; &amp;&amp;、A&amp;&amp; &amp;、A&amp;&amp; &amp;&amp;）时，折叠结果为：</span></span>
<span class="line"></span>
<span class="line">A<span class="token operator">&amp;</span> <span class="token operator">&amp;</span> → 折叠为 A<span class="token operator">&amp;</span></span>
<span class="line">A<span class="token operator">&amp;</span> <span class="token operator">&amp;&amp;</span> → 折叠为 A<span class="token operator">&amp;</span></span>
<span class="line">A<span class="token operator">&amp;&amp;</span> <span class="token operator">&amp;</span> → 折叠为 A<span class="token operator">&amp;</span></span>
<span class="line">A<span class="token operator">&amp;&amp;</span> <span class="token operator">&amp;&amp;</span> → 折叠为 A<span class="token operator">&amp;&amp;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>举个例子</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span>T<span class="token operator">&amp;&amp;</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>  <span class="token comment">// 左值</span></span>
<span class="line">    <span class="token function">func</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 传入左值，推导过程：</span></span>
<span class="line">                 <span class="token comment">// 1. 因为a是左值，T被推导为 int&amp;（左值引用类型）；</span></span>
<span class="line">                 <span class="token comment">// 2. 此时 T&amp;&amp; 变为 int&amp; &amp;&amp;，根据规则2折叠为 int&amp;（左值引用）；</span></span>
<span class="line">                 <span class="token comment">// 3. 最终 t 是 int&amp;，绑定到左值a。</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">func</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 传入右值，推导过程：</span></span>
<span class="line">                 <span class="token comment">// 1. 20是右值，T被推导为 int（非引用类型）；</span></span>
<span class="line">                 <span class="token comment">// 2. 此时 T&amp;&amp; 是 int&amp;&amp;，无需折叠（规则4）；</span></span>
<span class="line">                 <span class="token comment">// 3. 最终 t 是 int&amp;&amp;，绑定到右值20。</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">int</span><span class="token operator">&amp;</span> la <span class="token operator">=</span> a<span class="token punctuation">;</span>       <span class="token comment">// 左值引用</span></span>
<span class="line">    <span class="token keyword">int</span><span class="token operator">&amp;&amp;</span> ra <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>     <span class="token comment">// 右值引用</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// auto&amp;&amp; 是万能引用（因为auto会触发类型推导）</span></span>
<span class="line">    <span class="token keyword">auto</span><span class="token operator">&amp;&amp;</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span>      <span class="token comment">// a是左值 → auto被推导为int&amp; → auto&amp;&amp; 是 int&amp; &amp;&amp; → 折叠为 int&amp;（左值引用）</span></span>
<span class="line">    <span class="token keyword">auto</span><span class="token operator">&amp;&amp;</span> c <span class="token operator">=</span> ra<span class="token punctuation">;</span>     <span class="token comment">// ra是左值（右值引用变量本身是左值）→ auto被推导为int&amp; → 折叠为 int&amp;</span></span>
<span class="line">    <span class="token keyword">auto</span><span class="token operator">&amp;&amp;</span> d <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>     <span class="token comment">// 30是右值 → auto被推导为int → auto&amp;&amp; 是 int&amp;&amp;（右值引用）</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">struct</span> <span class="token class-name">MyType</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">using</span> Type <span class="token operator">=</span> T<span class="token operator">&amp;&amp;</span><span class="token punctuation">;</span>  <span class="token comment">// T&amp;&amp; 可能是引用的引用（需折叠）</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 实例化时T为int&amp;（左值引用）</span></span>
<span class="line">    <span class="token keyword">typename</span> <span class="token class-name">MyType</span><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&amp;</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>Type t1<span class="token punctuation">;</span>  <span class="token comment">// T&amp;&amp; 是 int&amp; &amp;&amp; → 折叠为 int&amp;（左值引用）</span></span>
<span class="line">    <span class="token comment">// 实例化时T为int&amp;&amp;（右值引用）</span></span>
<span class="line">    <span class="token keyword">typename</span> <span class="token class-name">MyType</span><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&amp;&amp;</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>Type t2<span class="token punctuation">;</span> <span class="token comment">// T&amp;&amp; 是 int&amp;&amp; &amp;&amp; → 折叠为 int&amp;&amp;（右值引用）</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_25-static-namespace" tabindex="-1"><a class="header-anchor" href="#_25-static-namespace"><span>25. static/namespace</span></a></h2><ul><li>cpp中匿名命名空间的作用类似于 C 语言的static关键字。无论是 C 的 static（全局作用域）还是 C++ 的匿名命名空间，本质都是通过 <strong>“内部链接（Internal Linkage）”</strong> 实现作用域隔离 —— 即符号仅在当前编译单元（通常对应一个 .c 或 .cpp 文件） 内可见，不会被其他编译单元访问到，从而避免跨文件的命名冲突。</li></ul><h3 id="_25-1-static" tabindex="-1"><a class="header-anchor" href="#_25-1-static"><span>25.1 static</span></a></h3><ul><li>修饰全局变量：限制作用域为当前编译单元（.c 文件）</li><li>修饰局部变量：延长生命周期至程序运行期（全局生命周期）</li><li>修饰函数：限制函数只能在当前编译单元（.c 文件）内被调用</li><li>修饰类的成员变量（静态成员变量）（C++中才有）</li><li>修饰类的成员函数（静态成员函数）（C++中才有）</li></ul><h3 id="_25-2-namespace" tabindex="-1"><a class="header-anchor" href="#_25-2-namespace"><span>25.2 namespace</span></a></h3><ul><li>C++ 匿名命名空间仅负责 “作用域隔离”，与 “生命周期” 完全无关（变量的生命周期仍由 static/auto 等关键字控制），避免歧义。</li><li>匿名命名空间可作用于 “类、模板”，而 C 全局 static 不行</li></ul><h2 id="_26-大小端字节序" tabindex="-1"><a class="header-anchor" href="#_26-大小端字节序"><span>26. 大小端字节序</span></a></h2><ul><li><p>大小端字节序（Endianness）是指多字节数据（如 16 位整数、32 位浮点数）在内存中存储时，字节的排列顺序规则—— 本质是解决 “多字节数据的‘高位字节’和‘低位字节’该放在内存的‘低地址’还是‘高地址’” 的问题。</p></li><li><p>高字节与低字节：对多字节数据，权重高的字节是 “高字节”，权重低的是 “低字节”。例：16 位整数 0x1234（十六进制），0x12 是高字节（代表 12×256），0x34 是低字节（代表 34×1）；32 位整数 0x12345678，0x12 是最高字节，0x78 是最低字节。</p></li><li><p>内存地址：内存按 “字节” 划分，每个字节有唯一地址，地址值从小到大递增（低地址 → 高地址）。</p></li><li><p>大端字节序：高字节存低地址，低字节存高地址（即 “数据的高位在前，低位在后”，符合人类读写数字的习惯）。</p></li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line">示例：<span class="token number">32</span> 位整数 <span class="token number">0x12345678</span> 的大端存储</span>
<span class="line">假设内存起始地址为 <span class="token number">0x00</span>，字节排列如下：</span>
<span class="line"></span>
<span class="line">内存地址存储的字节说明（数据的字节类型）</span>
<span class="line"><span class="token number">0x12</span>最高字节（权重最高）</span>
<span class="line"><span class="token number">0x34</span>次高字节</span>
<span class="line"><span class="token number">0x56</span>次低字节</span>
<span class="line"><span class="token number">0x78</span>最低字节（权重最低）</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>小端字节序：低字节存低地址，高字节存高地址（即 “数据的低位在前，高位在后”，与人类读写习惯相反，但更符合硬件处理效率）。</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line">示例：<span class="token number">32</span> 位整数 <span class="token number">0x12345678</span> 的小端存储</span>
<span class="line">同样起始地址 <span class="token number">0x00</span>，字节排列如下：</span>
<span class="line"></span>
<span class="line">内存地址存储的字节说明（数据的字节类型）</span>
<span class="line"><span class="token number">0x78</span>最低字节（权重最低）</span>
<span class="line"><span class="token number">0x56</span>次低字节</span>
<span class="line"><span class="token number">0x34</span>次高字节</span>
<span class="line"><span class="token number">0x12</span>最高字节（权重最高）</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:center;">对比维度</th><th style="text-align:left;">大端序（Big-Endian）</th><th style="text-align:left;">小端序（Little-Endian）</th></tr></thead><tbody><tr><td style="text-align:center;">存储规则</td><td style="text-align:left;">高字节存低地址，低字节存高地址</td><td style="text-align:left;">低字节存低地址，高字节存高地址</td></tr><tr><td style="text-align:center;">人类可读性</td><td style="text-align:left;">高（符合读写习惯）</td><td style="text-align:left;">低（需逆序解读）</td></tr><tr><td style="text-align:center;">典型应用</td><td style="text-align:left;">网络协议（TCP/IP）、PowerPC</td><td style="text-align:left;">x86/x86_64、ARM（默认）</td></tr><tr><td style="text-align:center;">核心问题</td><td style="text-align:left;">跨平台交互需统一为大端（网络序）</td><td style="text-align:left;">需检测并转换为目标字节序</td></tr></tbody></table><h2 id="_27-学" tabindex="-1"><a class="header-anchor" href="#_27-学"><span>27. 学</span></a></h2><p>Java:业务+数据库CURD C++:垂直精细</p><ul><li>算法</li><li>上位机桌面</li><li>图像姻亲</li><li>数据库</li><li>云原生</li><li>虚拟化</li><li>车企</li><li>嵌入式bsp</li><li>音视频</li><li>网络</li><li>存储</li><li>安全</li><li>cdn</li><li>游戏后端</li><li>游戏客户端</li><li>嵌入式软件</li></ul><h2 id="注意事项" tabindex="-1"><a class="header-anchor" href="#注意事项"><span>注意事项</span></a></h2><p>std下的锁机制 lock_guard condition_variable unique_ptr shared_ptr std::mutex是非递归互斥锁，同一个线程不可以多次连续调用lock方法。如果同一线程对std::mutex连续执行lock，会导致死锁（线程阻塞在第二次lock调用，等待自己释放锁）。 C 语言不支持函数重载，其函数名修饰（name mangling）规则简单，仅基于函数名本身，不包含参数类型和个数等信息。</p><ul><li>STD 的 move 的底层实现机制是通过引用折叠和 STD 的 reinterpret cast 转换实现的。 std::move 的核心作用是将对象转换为右值引用，其底层主要依赖引用折叠规则和static_cast，而非 reinterpret_cast。具体来说，std::move 通常的实现逻辑是：通过模板函数接收一个对象（可以是左值或右值），利用引用折叠规则确定其类型，再通过 static_cast 将其强制转换为对应的右值引用类型。reinterpret_cast 用于底层的类型重新解释，风险较高且语义与 std::move 所需的 “转换为右值引用” 不匹配，因此不会被用于 std::move 的实现中。</li></ul><p>HTTP-2 中多路复用特性解决了 HTTP-1.1 的对头阻塞问题</p><p>对头阻塞：在同一 TCP 连接中，同一时刻只能处理一个请求 / 响应，后续请求必须等待前一个完成才能发送，若前一个请求阻塞，会导致所有后续请求被卡住。</p><p>多路复用：是 HTTP/2 的核心特性，它通过在单一 TCP 连接中同时传输多个请求 / 响应（以二进制帧的形式交错发送），避免了 HTTP/1.1 中请求排队等待的问题，从根本上解决了对头阻塞。</p><p>内联函数语法上可以是虚函数，但编译器会自动忽略内联属性，最终该函数仅作为虚函数生效，无法实现内联的核心功能（编译时代码展开）。</p><p>内联函数（inline）：编译时 “代码展开”，减少调用开销。内联函数的核心目的是消除函数调用的开销（如栈帧创建、参数压栈、返回值处理等）。其实现依赖编译时静态绑定</p><p>虚函数（virtual）：运行时 “多态绑定”，实现动态行为。虚函数的核心目的是支持运行时多态（即 “同一调用语句，根据对象的实际类型执行不同函数”）。其实现依赖运行时动态绑定，关键是 “虚函数表（vtable）” 和 “虚指针（vptr）”：</p><ul><li><p>static_cast&lt;&gt;</p></li><li><p>inline</p></li><li><p>类的构造函数加冒号后面可以初始化成员变量也可以初始化父类。 类中包含以下成员，必须放在初始化列表位置进行初始化：</p></li></ul><ol start="2"><li>引用成员变量</li><li>const成员变量</li><li>自定义类型成员(该类没有默认构造函数)</li></ol><div class="language-C line-numbers-mode" data-highlighter="prismjs" data-ext="C"><pre><code class="language-C"><span class="line">for (auto&amp; t : threads) {</span>
<span class="line">	t.join();</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>移动语义 右值引用</p><p>左值引用，右值引用，万能引用 完美转发 hpp文件Qt中好像用到了</p><p>可移动对象 for each</p><p>进程时间片用完时，仅会暂时释放 CPU（仍具备运行条件），应从运行状态转为就绪状态（等待下一次调度分配 CPU）</p><p>进程执行完毕后，生命周期结束，应直接从运行状态转为终止状态，而非就绪状态（就绪状态的进程仍需等待调度运行，执行完毕的进程已无运行必要）</p><p>进程发起网络请求后，需等待网络响应（属于 “不可立即完成的事件”），此时即使有 CPU 资源也无法继续运行，因此从运行状态转为阻塞状态，直至网络响应完成后再转回就绪状态。</p><p>IO 操作完成时，进程此前因等待 IO 已处于阻塞状态，事件完成后具备了运行条件（但未分配 CPU），应从阻塞状态转为就绪状态，</p><p>多线程加代码</p><p>同步需要 “主动阻塞等待” 任务完成（体现在join那一步），而异步可以 “先做别的事，等需要结果时再等”。</p>`,249))])}const f=c(g,[["render",h]]),_=JSON.parse('{"path":"/guide/knowledge/C__%E5%9F%BA%E7%A1%80.html","title":"C++基础","lang":"zh-CN","frontmatter":{},"git":{},"filePathRelative":"guide/knowledge/C++基础.md"}');export{f as comp,_ as data};
